(function(C){var P,aD="2.7.0",a0=typeof global!=="undefined"?global:this,al,V=Math.round,ab,u=0,e=1,aT=2,t=3,ax=4,r=5,S=6,az={},aM={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_tzm:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ak=(typeof module!=="undefined"&&module.exports),b=/^\/?Date\((\-?\d+)/i,a3=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,aF=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ao=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,aa=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,f=/\d\d?/,ac=/\d{1,3}/,D=/\d{1,4}/,bb=/[+\-]?\d{1,6}/,aY=/\d+/,H=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,n=/Z|[\+\-]\d\d:?\d\d/gi,j=/T/i,aO=/[\+\-]?\d+(\.\d{1,3})?/,bf=/\d{1,2}/,Z=/\d/,p=/\d\d/,a2=/\d{3}/,aN=/\d{4}/,ag=/[+-]?\d{6}/,X=/[+-]?\d+/,aL=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,T="YYYY-MM-DDTHH:mm:ssZ",a1=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],F=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Y=/([\+\-]|\d\d)/gi,aH="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),B={Milliseconds:1,Seconds:1000,Minutes:60000,Hours:3600000,Days:86400000,Months:2592000000,Years:31536000000},c={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},aX={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},aj={},v={s:45,m:45,h:22,dd:25,dm:45,dy:345},aS="DDD w W M D d".split(" "),am="M D H h m s w W".split(" "),aU={M:function(){return this.month()+1},MMM:function(bg){return this.lang().monthsShort(this,bg)},MMMM:function(bg){return this.lang().months(this,bg)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(bg){return this.lang().weekdaysMin(this,bg)},ddd:function(bg){return this.lang().weekdaysShort(this,bg)},dddd:function(bg){return this.lang().weekdays(this,bg)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return I(this.year()%100,2)},YYYY:function(){return I(this.year(),4)},YYYYY:function(){return I(this.year(),5)},YYYYYY:function(){var bh=this.year(),bg=bh>=0?"+":"-";return bg+I(Math.abs(bh),6)},gg:function(){return I(this.weekYear()%100,2)},gggg:function(){return I(this.weekYear(),4)},ggggg:function(){return I(this.weekYear(),5)},GG:function(){return I(this.isoWeekYear()%100,2)},GGGG:function(){return I(this.isoWeekYear(),4)},GGGGG:function(){return I(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return K(this.milliseconds()/100)},SS:function(){return I(K(this.milliseconds()/10),2)},SSS:function(){return I(this.milliseconds(),3)},SSSS:function(){return I(this.milliseconds(),3)},Z:function(){var bh=-this.zone(),bg="+";if(bh<0){bh=-bh;bg="-"}return bg+I(K(bh/60),2)+":"+I(K(bh)%60,2)},ZZ:function(){var bh=-this.zone(),bg="+";if(bh<0){bh=-bh;bg="-"}return bg+I(K(bh/60),2)+I(K(bh)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},U=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];function aP(bh,bg,bi){switch(arguments.length){case 2:return bh!=null?bh:bg;case 3:return bh!=null?bh:bg!=null?bg:bi;default:throw new Error("Implement me")}}function ae(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function bd(bh,bg){var bj=true;function bi(){if(P.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&console.warn){console.warn("Deprecation warning: "+bh)}}return aB(function(){if(bj){bi();bj=false}return bg.apply(this,arguments)},bg)}function M(bh,bg){return function(bi){return I(bh.call(this,bi),bg)}}function g(bg,bh){return function(bi){return this.lang().ordinal(bg.call(this,bi),bh)}}while(aS.length){ab=aS.pop();aU[ab+"o"]=g(aU[ab],ab)}while(am.length){ab=am.pop();aU[ab+ab]=M(aU[ab],2)}aU.DDDD=M(aU.DDD,3);function aI(){}function J(bg){a7(bg);aB(this,bg)}function ad(bl){var bn=l(bl),bm=bn.year||0,bh=bn.quarter||0,bi=bn.month||0,bg=bn.week||0,bq=bn.day||0,bo=bn.hour||0,bk=bn.minute||0,bp=bn.second||0,bj=bn.millisecond||0;this._milliseconds=+bj+bp*1000+bk*60000+bo*3600000;this._days=+bq+bg*7;this._months=+bi+bh*3+bm*12;this._data={};this._bubble()}function aB(bh,bg){for(var bi in bg){if(bg.hasOwnProperty(bi)){bh[bi]=bg[bi]}}if(bg.hasOwnProperty("toString")){bh.toString=bg.toString}if(bg.hasOwnProperty("valueOf")){bh.valueOf=bg.valueOf}return bh}function a9(bh){var bg={},bi;for(bi in bh){if(bh.hasOwnProperty(bi)&&aM.hasOwnProperty(bi)){bg[bi]=bh[bi]}}return bg}function k(bg){if(bg<0){return Math.ceil(bg)}else{return Math.floor(bg)}}function I(bk,bj,bi){var bh=""+Math.abs(bk),bg=bk>=0;while(bh.length<bj){bh="0"+bh}return(bg?(bi?"+":""):"-")+bh}function E(bi,bl,bk,bj){var bh=bl._milliseconds,bm=bl._days,bg=bl._months;bj=bj==null?true:bj;if(bh){bi._d.setTime(+bi._d+bh*bk)}if(bm){aQ(bi,"Date",be(bi,"Date")+bm*bk)}if(bg){ba(bi,be(bi,"Month")+bg*bk)}if(bj){P.updateOffset(bi,bm||bg)}}function a(bg){return Object.prototype.toString.call(bg)==="[object Array]"}function d(bg){return Object.prototype.toString.call(bg)==="[object Date]"||bg instanceof Date}function aR(bl,bk,bh){var bg=Math.min(bl.length,bk.length),bi=Math.abs(bl.length-bk.length),bm=0,bj;for(bj=0;bj<bg;bj++){if((bh&&bl[bj]!==bk[bj])||(!bh&&K(bl[bj])!==K(bk[bj]))){bm++}}return bm+bi}function aW(bh){if(bh){var bg=bh.toLowerCase().replace(/(.)s$/,"$1");bh=c[bh]||aX[bg]||bg}return bh}function l(bi){var bh={},bg,bj;for(bj in bi){if(bi.hasOwnProperty(bj)){bg=aW(bj);if(bg){bh[bg]=bi[bj]}}}return bh}function au(bh){var bg,bi;if(bh.indexOf("week")===0){bg=7;bi="day"}else{if(bh.indexOf("month")===0){bg=12;bi="month"}else{return}}P[bh]=function(bn,bk){var bm,bj,bo=P.fn._lang[bh],bl=[];if(typeof bn==="number"){bk=bn;bn=C}bj=function(bq){var bp=P().utc().set(bi,bq);return bo.call(P.fn._lang,bp,bn||"")};if(bk!=null){return bj(bk)}else{for(bm=0;bm<bg;bm++){bl.push(bj(bm))}return bl}}}function K(bg){var bi=+bg,bh=0;if(bi!==0&&isFinite(bi)){if(bi>=0){bh=Math.floor(bi)}else{bh=Math.ceil(bi)}}return bh}function a5(bg,bh){return new Date(Date.UTC(bg,bh+1,0)).getUTCDate()}function aG(bg,bi,bh){return z(P([bg,11,31+bi-bh]),bi,bh).week}function aZ(bg){return aK(bg)?366:365}function aK(bg){return(bg%4===0&&bg%100!==0)||bg%400===0}function a7(bg){var bh;if(bg._a&&bg._pf.overflow===-2){bh=bg._a[e]<0||bg._a[e]>11?e:bg._a[aT]<1||bg._a[aT]>a5(bg._a[u],bg._a[e])?aT:bg._a[t]<0||bg._a[t]>23?t:bg._a[ax]<0||bg._a[ax]>59?ax:bg._a[r]<0||bg._a[r]>59?r:bg._a[S]<0||bg._a[S]>999?S:-1;if(bg._pf._overflowDayOfYear&&(bh<u||bh>aT)){bh=aT}bg._pf.overflow=bh}}function aC(bg){if(bg._isValid==null){bg._isValid=!isNaN(bg._d.getTime())&&bg._pf.overflow<0&&!bg._pf.empty&&!bg._pf.invalidMonth&&!bg._pf.nullInput&&!bg._pf.invalidFormat&&!bg._pf.userInvalidated;if(bg._strict){bg._isValid=bg._isValid&&bg._pf.charsLeftOver===0&&bg._pf.unusedTokens.length===0}}return bg._isValid}function A(bg){return bg?bg.toLowerCase().replace("_","-"):bg}function w(bg,bh){return bh._isUTC?P(bg).zone(bh._offset||0):P(bg).local()}aB(aI.prototype,{set:function(bg){var bi,bh;for(bh in bg){bi=bg[bh];if(typeof bi==="function"){this[bh]=bi}else{this["_"+bh]=bi}}},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(bg){return this._months[bg.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(bg){return this._monthsShort[bg.month()]},monthsParse:function(bg){var bh,bj,bi;if(!this._monthsParse){this._monthsParse=[]}for(bh=0;bh<12;bh++){if(!this._monthsParse[bh]){bj=P.utc([2000,bh]);bi="^"+this.months(bj,"")+"|^"+this.monthsShort(bj,"");this._monthsParse[bh]=new RegExp(bi.replace(".",""),"i")}if(this._monthsParse[bh].test(bg)){return bh}}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(bg){return this._weekdays[bg.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(bg){return this._weekdaysShort[bg.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(bg){return this._weekdaysMin[bg.day()]},weekdaysParse:function(bj){var bg,bi,bh;if(!this._weekdaysParse){this._weekdaysParse=[]}for(bg=0;bg<7;bg++){if(!this._weekdaysParse[bg]){bi=P([2000,1]).day(bg);bh="^"+this.weekdays(bi,"")+"|^"+this.weekdaysShort(bi,"")+"|^"+this.weekdaysMin(bi,"");this._weekdaysParse[bg]=new RegExp(bh.replace(".",""),"i")}if(this._weekdaysParse[bg].test(bj)){return bg}}},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(bh){var bg=this._longDateFormat[bh];if(!bg&&this._longDateFormat[bh.toUpperCase()]){bg=this._longDateFormat[bh.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(bi){return bi.slice(1)});this._longDateFormat[bh]=bg}return bg},isPM:function(bg){return((bg+"").toLowerCase().charAt(0)==="p")},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(bg,bh,bi){if(bg>11){return bi?"pm":"PM"}else{return bi?"am":"AM"}},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(bh,bi){var bg=this._calendar[bh];return typeof bg==="function"?bg.apply(bi):bg},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(bj,bi,bh,bk){var bg=this._relativeTime[bh];return(typeof bg==="function")?bg(bj,bi,bh,bk):bg.replace(/%d/i,bj)},pastFuture:function(bi,bg){var bh=this._relativeTime[bi>0?"future":"past"];return typeof bh==="function"?bh(bg):bh.replace(/%s/i,bg)},ordinal:function(bg){return this._ordinal.replace("%d",bg)},_ordinal:"%d",preparse:function(bg){return bg},postformat:function(bg){return bg},week:function(bg){return z(bg,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});function ai(bh,bg){bg.abbr=bh;if(!az[bh]){az[bh]=new aI()}az[bh].set(bg);return az[bh]}function a4(bg){delete az[bg]}function aA(bk){var bj=0,bh,bm,bl,bi,bg=function(bn){if(!az[bn]&&ak){try{require("./lang/"+bn)}catch(bo){}}return az[bn]};if(!bk){return P.fn._lang}if(!a(bk)){bm=bg(bk);if(bm){return bm}bk=[bk]}while(bj<bk.length){bi=A(bk[bj]).split("-");bh=bi.length;bl=A(bk[bj+1]);bl=bl?bl.split("-"):null;while(bh>0){bm=bg(bi.slice(0,bh).join("-"));if(bm){return bm}if(bl&&bl.length>=bh&&aR(bi,bl,true)>=bh-1){break}bh--}bj++}return P.fn._lang}function ah(bg){if(bg.match(/\[[\s\S]/)){return bg.replace(/^\[|\]$/g,"")}return bg.replace(/\\/g,"")}function q(bi){var bj=bi.match(ao),bg,bh;for(bg=0,bh=bj.length;bg<bh;bg++){if(aU[bj[bg]]){bj[bg]=aU[bj[bg]]}else{bj[bg]=ah(bj[bg])}}return function(bl){var bk="";for(bg=0;bg<bh;bg++){bk+=bj[bg] instanceof Function?bj[bg].call(bl,bi):bj[bg]}return bk}}function an(bg,bh){if(!bg.isValid()){return bg.lang().invalidDate()}bh=bc(bh,bg.lang());if(!aj[bh]){aj[bh]=q(bh)}return aj[bh](bg)}function bc(bi,bj){var bg=5;function bh(bk){return bj.longDateFormat(bk)||bk}aa.lastIndex=0;while(bg>=0&&aa.test(bi)){bi=bi.replace(aa,bh);aa.lastIndex=0;bg-=1}return bi}function ar(bj,bi){var bh,bg=bi._strict;switch(bj){case"Q":return Z;case"DDDD":return a2;case"YYYY":case"GGGG":case"gggg":return bg?aN:D;case"Y":case"G":case"g":return X;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return bg?ag:bb;case"S":if(bg){return Z}case"SS":if(bg){return p}case"SSS":if(bg){return a2}case"DDD":return ac;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return H;case"a":case"A":return aA(bi._l)._meridiemParse;case"X":return aO;case"Z":case"ZZ":return n;case"T":return j;case"SSSS":return aY;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return bg?p:f;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return f;case"Do":return bf;default:bh=new RegExp(a8(aw(bj.replace("\\","")),"i"));return bh}}function x(bh){bh=bh||"";var bg=(bh.match(n)||[]),bk=bg[bg.length-1]||[],bj=(bk+"").match(Y)||["-",0,0],bi=+(bj[1]*60)+K(bj[2]);return bj[0]==="+"?-bi:bi}function av(bk,bi,bj){var bh,bg=bj._a;switch(bk){case"Q":if(bi!=null){bg[e]=(K(bi)-1)*3}break;case"M":case"MM":if(bi!=null){bg[e]=K(bi)-1}break;case"MMM":case"MMMM":bh=aA(bj._l).monthsParse(bi);if(bh!=null){bg[e]=bh}else{bj._pf.invalidMonth=bi}break;case"D":case"DD":if(bi!=null){bg[aT]=K(bi)}break;case"Do":if(bi!=null){bg[aT]=K(parseInt(bi,10))}break;case"DDD":case"DDDD":if(bi!=null){bj._dayOfYear=K(bi)}break;case"YY":bg[u]=P.parseTwoDigitYear(bi);break;case"YYYY":case"YYYYY":case"YYYYYY":bg[u]=K(bi);break;case"a":case"A":bj._isPm=aA(bj._l).isPM(bi);break;case"H":case"HH":case"h":case"hh":bg[t]=K(bi);break;case"m":case"mm":bg[ax]=K(bi);break;case"s":case"ss":bg[r]=K(bi);break;case"S":case"SS":case"SSS":case"SSSS":bg[S]=K(("0."+bi)*1000);break;case"X":bj._d=new Date(parseFloat(bi)*1000);break;case"Z":case"ZZ":bj._useUTC=true;bj._tzm=x(bi);break;case"dd":case"ddd":case"dddd":bh=aA(bj._l).weekdaysParse(bi);if(bh!=null){bj._w=bj._w||{};bj._w.d=bh}else{bj._pf.invalidWeekday=bi}break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":bk=bk.substr(0,1);case"gggg":case"GGGG":case"GGGGG":bk=bk.substr(0,2);if(bi){bj._w=bj._w||{};bj._w[bk]=K(bi)}break;case"gg":case"GG":bj._w=bj._w||{};bj._w[bk]=P.parseTwoDigitYear(bi)}}function Q(bj){var bl,bg,bh,bk,bo,bm,bn,bi;bl=bj._w;if(bl.GG!=null||bl.W!=null||bl.E!=null){bo=1;bm=4;bg=aP(bl.GG,bj._a[u],z(P(),1,4).year);bh=aP(bl.W,1);bk=aP(bl.E,1)}else{bi=aA(bj._l);bo=bi._week.dow;bm=bi._week.doy;bg=aP(bl.gg,bj._a[u],z(P(),bo,bm).year);bh=aP(bl.w,1);if(bl.d!=null){bk=bl.d;if(bk<bo){++bh}}else{if(bl.e!=null){bk=bl.e+bo}else{bk=bo}}}bn=s(bg,bh,bk,bm,bo);bj._a[u]=bn.year;bj._dayOfYear=bn.dayOfYear}function af(bk){var bl,bj,bi=[],bh,bg;if(bk._d){return}bh=m(bk);if(bk._w&&bk._a[aT]==null&&bk._a[e]==null){Q(bk)}if(bk._dayOfYear){bg=aP(bk._a[u],bh[u]);if(bk._dayOfYear>aZ(bg)){bk._pf._overflowDayOfYear=true}bj=G(bg,0,bk._dayOfYear);bk._a[e]=bj.getUTCMonth();bk._a[aT]=bj.getUTCDate()}for(bl=0;bl<3&&bk._a[bl]==null;++bl){bk._a[bl]=bi[bl]=bh[bl]}for(;bl<7;bl++){bk._a[bl]=bi[bl]=(bk._a[bl]==null)?(bl===2?1:0):bk._a[bl]}bk._d=(bk._useUTC?G:ap).apply(null,bi);if(bk._tzm!=null){bk._d.setUTCMinutes(bk._d.getUTCMinutes()+bk._tzm)}}function aE(bh){var bg;if(bh._d){return}bg=l(bh._i);bh._a=[bg.year,bg.month,bg.day,bg.hour,bg.minute,bg.second,bg.millisecond];af(bh)}function m(bh){var bg=new Date();if(bh._useUTC){return[bg.getUTCFullYear(),bg.getUTCMonth(),bg.getUTCDate()]}else{return[bg.getFullYear(),bg.getMonth(),bg.getDate()]}}function O(bj){if(bj._f===P.ISO_8601){aq(bj);return}bj._a=[];bj._pf.empty=true;var bi=aA(bj._l),bm=""+bj._i,bl,bh,bp,bk,bo,bg=bm.length,bn=0;bp=bc(bj._f,bi).match(ao)||[];for(bl=0;bl<bp.length;bl++){bk=bp[bl];bh=(bm.match(ar(bk,bj))||[])[0];if(bh){bo=bm.substr(0,bm.indexOf(bh));if(bo.length>0){bj._pf.unusedInput.push(bo)}bm=bm.slice(bm.indexOf(bh)+bh.length);bn+=bh.length}if(aU[bk]){if(bh){bj._pf.empty=false}else{bj._pf.unusedTokens.push(bk)}av(bk,bh,bj)}else{if(bj._strict&&!bh){bj._pf.unusedTokens.push(bk)}}}bj._pf.charsLeftOver=bg-bn;if(bm.length>0){bj._pf.unusedInput.push(bm)}if(bj._isPm&&bj._a[t]<12){bj._a[t]+=12}if(bj._isPm===false&&bj._a[t]===12){bj._a[t]=0}af(bj);a7(bj)}function aw(bg){return bg.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(bh,bl,bk,bj,bi){return bl||bk||bj||bi})}function a8(bg){return bg.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function aV(bg){var bk,bi,bj,bh,bl;if(bg._f.length===0){bg._pf.invalidFormat=true;bg._d=new Date(NaN);return}for(bh=0;bh<bg._f.length;bh++){bl=0;bk=aB({},bg);bk._pf=ae();bk._f=bg._f[bh];O(bk);if(!aC(bk)){continue}bl+=bk._pf.charsLeftOver;bl+=bk._pf.unusedTokens.length*10;bk._pf.score=bl;if(bj==null||bl<bj){bj=bl;bi=bk}}aB(bg,bi||bk)}function aq(bj){var bk,bg,bi=bj._i,bh=aL.exec(bi);if(bh){bj._pf.iso=true;for(bk=0,bg=a1.length;bk<bg;bk++){if(a1[bk][1].exec(bi)){bj._f=a1[bk][0]+(bh[6]||" ");break}}for(bk=0,bg=F.length;bk<bg;bk++){if(F[bk][1].exec(bi)){bj._f+=F[bk][0];break}}if(bi.match(n)){bj._f+="Z"}O(bj)}else{bj._isValid=false}}function h(bg){aq(bg);if(bg._isValid===false){delete bg._isValid;P.createFromInputFallback(bg)}}function N(bi){var bh=bi._i,bg=b.exec(bh);if(bh===C){bi._d=new Date()}else{if(bg){bi._d=new Date(+bg[1])}else{if(typeof bh==="string"){h(bi)}else{if(a(bh)){bi._a=bh.slice(0);af(bi)}else{if(d(bh)){bi._d=new Date(+bh)}else{if(typeof(bh)==="object"){aE(bi)}else{if(typeof(bh)==="number"){bi._d=new Date(bh)}else{P.createFromInputFallback(bi)}}}}}}}}function ap(bn,bg,bl,bk,bm,bj,bi){var bh=new Date(bn,bg,bl,bk,bm,bj,bi);if(bn<1970){bh.setFullYear(bn)}return bh}function G(bh){var bg=new Date(Date.UTC.apply(null,arguments));if(bh<1970){bg.setUTCFullYear(bh)}return bg}function a6(bg,bh){if(typeof bg==="string"){if(!isNaN(bg)){bg=parseInt(bg,10)}else{bg=bh.weekdaysParse(bg);if(typeof bg!=="number"){return null}}}return bg}function aJ(bg,bi,bh,bj,bk){return bk.relativeTime(bi||1,!!bh,bg,bj)}function y(bi,bg,bh){var bn=V(Math.abs(bi)/1000),bj=V(bn/60),bm=V(bj/60),bo=V(bm/24),bk=V(bo/365),bl=bn<v.s&&["s",bn]||bj===1&&["m"]||bj<v.m&&["mm",bj]||bm===1&&["h"]||bm<v.h&&["hh",bm]||bo===1&&["d"]||bo<=v.dd&&["dd",bo]||bo<=v.dm&&["M"]||bo<v.dy&&["MM",V(bo/30)]||bk===1&&["y"]||["yy",bk];bl[2]=bg;bl[3]=bi>0;bl[4]=bh;return aJ.apply({},bl)}function z(bk,bi,bl){var bh=bl-bi,bg=bl-bk.day(),bj;if(bg>bh){bg-=7}if(bg<bh-7){bg+=7}bj=P(bk).add("d",bg);return{week:Math.ceil(bj.dayOfYear()/7),year:bj.year()}}function s(bk,bj,bl,bn,bg){var bm=G(bk,0,1).getUTCDay(),bi,bh;bm=bm===0?7:bm;bl=bl!=null?bl:bg;bi=bg-bm+(bm>bn?7:0)-(bm<bg?7:0);bh=7*(bj-1)+(bl-bg)+bi+1;return{year:bh>0?bk:bk-1,dayOfYear:bh>0?bh:aZ(bk-1)+bh}}function L(bh){var bg=bh._i,bi=bh._f;if(bg===null||(bi===C&&bg==="")){return P.invalid({nullInput:true})}if(typeof bg==="string"){bh._i=bg=aA().preparse(bg)}if(P.isMoment(bg)){bh=a9(bg);bh._d=new Date(+bg._d)}else{if(bi){if(a(bi)){aV(bh)}else{O(bh)}}else{N(bh)}}return new J(bh)}P=function(bh,bi,bj,bg){var bk;if(typeof(bj)==="boolean"){bg=bj;bj=C}bk={};bk._isAMomentObject=true;bk._i=bh;bk._f=bi;bk._l=bj;bk._strict=bg;bk._isUTC=false;bk._pf=ae();return L(bk)};P.suppressDeprecationWarnings=false;P.createFromInputFallback=bd("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(bg){bg._d=new Date(bg._i)});function at(bi,bj){var bh,bg;if(bj.length===1&&a(bj[0])){bj=bj[0]}if(!bj.length){return P()}bh=bj[0];for(bg=1;bg<bj.length;++bg){if(bj[bg][bi](bh)){bh=bj[bg]}}return bh}P.min=function(){var bg=[].slice.call(arguments,0);return at("isBefore",bg)};P.max=function(){var bg=[].slice.call(arguments,0);return at("isAfter",bg)};P.utc=function(bh,bi,bj,bg){var bk;if(typeof(bj)==="boolean"){bg=bj;bj=C}bk={};bk._isAMomentObject=true;bk._useUTC=true;bk._isUTC=true;bk._l=bj;bk._i=bh;bk._f=bi;bk._strict=bg;bk._pf=ae();return L(bk).utc()};P.unix=function(bg){return P(bg*1000)};P.duration=function(bh,bl){var bm=bh,bk=null,bg,bj,bi;if(P.isDuration(bh)){bm={ms:bh._milliseconds,d:bh._days,M:bh._months}}else{if(typeof bh==="number"){bm={};if(bl){bm[bl]=bh}else{bm.milliseconds=bh}}else{if(!!(bk=a3.exec(bh))){bg=(bk[1]==="-")?-1:1;bm={y:0,d:K(bk[aT])*bg,h:K(bk[t])*bg,m:K(bk[ax])*bg,s:K(bk[r])*bg,ms:K(bk[S])*bg}}else{if(!!(bk=aF.exec(bh))){bg=(bk[1]==="-")?-1:1;bi=function(bo){var bn=bo&&parseFloat(bo.replace(",","."));return(isNaN(bn)?0:bn)*bg};bm={y:bi(bk[2]),M:bi(bk[3]),d:bi(bk[4]),h:bi(bk[5]),m:bi(bk[6]),s:bi(bk[7]),w:bi(bk[8])}}}}}bj=new ad(bm);if(P.isDuration(bh)&&bh.hasOwnProperty("_lang")){bj._lang=bh._lang}return bj};P.version=aD;P.defaultFormat=T;P.ISO_8601=function(){};P.momentProperties=aM;P.updateOffset=function(){};P.relativeTimeThreshold=function(bg,bh){if(v[bg]===C){return false}v[bg]=bh;return true};P.lang=function(bh,bg){var bi;if(!bh){return P.fn._lang._abbr}if(bg){ai(A(bh),bg)}else{if(bg===null){a4(bh);bh="en"}else{if(!az[bh]){aA(bh)}}}bi=P.duration.fn._lang=P.fn._lang=aA(bh);return bi._abbr};P.langData=function(bg){if(bg&&bg._lang&&bg._lang._abbr){bg=bg._lang._abbr}return aA(bg)};P.isMoment=function(bg){return bg instanceof J||(bg!=null&&bg.hasOwnProperty("_isAMomentObject"))};P.isDuration=function(bg){return bg instanceof ad};for(ab=U.length-1;ab>=0;--ab){au(U[ab])}P.normalizeUnits=function(bg){return aW(bg)};P.invalid=function(bh){var bg=P.utc(NaN);if(bh!=null){aB(bg._pf,bh)}else{bg._pf.userInvalidated=true}return bg};P.parseZone=function(){return P.apply(null,arguments).parseZone()};P.parseTwoDigitYear=function(bg){return K(bg)+(K(bg)>68?1900:2000)};aB(P.fn=J.prototype,{clone:function(){return P(this)},valueOf:function(){return +this._d+((this._offset||0)*60000)},unix:function(){return Math.floor(+this/1000)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var bg=P(this).utc();if(0<bg.year()&&bg.year()<=9999){return an(bg,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}else{return an(bg,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}},toArray:function(){var bg=this;return[bg.year(),bg.month(),bg.date(),bg.hours(),bg.minutes(),bg.seconds(),bg.milliseconds()]},isValid:function(){return aC(this)},isDSTShifted:function(){if(this._a){return this.isValid()&&aR(this._a,(this._isUTC?P.utc(this._a):P(this._a)).toArray())>0}return false},parsingFlags:function(){return aB({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){this.zone(0);this._isUTC=false;return this},format:function(bh){var bg=an(this,bh||P.defaultFormat);return this.lang().postformat(bg)},add:function(bg,bi){var bh;if(typeof bg==="string"&&typeof bi==="string"){bh=P.duration(isNaN(+bi)?+bg:+bi,isNaN(+bi)?bi:bg)}else{if(typeof bg==="string"){bh=P.duration(+bi,bg)}else{bh=P.duration(bg,bi)}}E(this,bh,1);return this},subtract:function(bg,bi){var bh;if(typeof bg==="string"&&typeof bi==="string"){bh=P.duration(isNaN(+bi)?+bg:+bi,isNaN(+bi)?bi:bg)}else{if(typeof bg==="string"){bh=P.duration(+bi,bg)}else{bh=P.duration(bg,bi)}}E(this,bh,-1);return this},diff:function(bk,bj,bg){var bl=w(bk,this),bh=(this.zone()-bl.zone())*60000,bm,bi;bj=aW(bj);if(bj==="year"||bj==="month"){bm=(this.daysInMonth()+bl.daysInMonth())*43200000;bi=((this.year()-bl.year())*12)+(this.month()-bl.month());bi+=((this-P(this).startOf("month"))-(bl-P(bl).startOf("month")))/bm;bi-=((this.zone()-P(this).startOf("month").zone())-(bl.zone()-P(bl).startOf("month").zone()))*60000/bm;if(bj==="year"){bi=bi/12}}else{bm=(this-bl);bi=bj==="second"?bm/1000:bj==="minute"?bm/60000:bj==="hour"?bm/3600000:bj==="day"?(bm-bh)/86400000:bj==="week"?(bm-bh)/604800000:bm}return bg?bi:k(bi)},from:function(bh,bg){return P.duration(this.diff(bh)).lang(this.lang()._abbr).humanize(!bg)},fromNow:function(bg){return this.from(P(),bg)},calendar:function(bk){var bh=bk||P(),bg=w(bh,this).startOf("day"),bj=this.diff(bg,"days",true),bi=bj<-6?"sameElse":bj<-1?"lastWeek":bj<0?"lastDay":bj<1?"sameDay":bj<2?"nextDay":bj<7?"nextWeek":"sameElse";return this.format(this.lang().calendar(bi,this))},isLeapYear:function(){return aK(this.year())},isDST:function(){return(this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone())},day:function(bh){var bg=this._isUTC?this._d.getUTCDay():this._d.getDay();if(bh!=null){bh=a6(bh,this.lang());return this.add({d:bh-bg})}else{return bg}},month:o("Month",true),startOf:function(bg){bg=aW(bg);switch(bg){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(bg==="week"){this.weekday(0)}else{if(bg==="isoWeek"){this.isoWeekday(1)}}if(bg==="quarter"){this.month(Math.floor(this.month()/3)*3)}return this},endOf:function(bg){bg=aW(bg);return this.startOf(bg).add((bg==="isoWeek"?"week":bg),1).subtract("ms",1)},isAfter:function(bh,bg){bg=typeof bg!=="undefined"?bg:"millisecond";return +this.clone().startOf(bg)>+P(bh).startOf(bg)},isBefore:function(bh,bg){bg=typeof bg!=="undefined"?bg:"millisecond";return +this.clone().startOf(bg)<+P(bh).startOf(bg)},isSame:function(bh,bg){bg=bg||"ms";return +this.clone().startOf(bg)===+w(bh,this).startOf(bg)},min:bd("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(bg){bg=P.apply(null,arguments);return bg<this?this:bg}),max:bd("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(bg){bg=P.apply(null,arguments);return bg>this?this:bg}),zone:function(bg,bh){var bi=this._offset||0;if(bg!=null){if(typeof bg==="string"){bg=x(bg)}if(Math.abs(bg)<16){bg=bg*60}this._offset=bg;this._isUTC=true;if(bi!==bg){if(!bh||this._changeInProgress){E(this,P.duration(bi-bg,"m"),1,false)}else{if(!this._changeInProgress){this._changeInProgress=true;P.updateOffset(this,true);this._changeInProgress=null}}}}else{return this._isUTC?bi:this._d.getTimezoneOffset()}return this},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm){this.zone(this._tzm)}else{if(typeof this._i==="string"){this.zone(this._i)}}return this},hasAlignedHourOffset:function(bg){if(!bg){bg=0}else{bg=P(bg).zone()}return(this.zone()-bg)%60===0},daysInMonth:function(){return a5(this.year(),this.month())},dayOfYear:function(bg){var bh=V((P(this).startOf("day")-P(this).startOf("year"))/86400000)+1;return bg==null?bh:this.add("d",(bg-bh))},quarter:function(bg){return bg==null?Math.ceil((this.month()+1)/3):this.month((bg-1)*3+this.month()%3)},weekYear:function(bg){var bh=z(this,this.lang()._week.dow,this.lang()._week.doy).year;return bg==null?bh:this.add("y",(bg-bh))},isoWeekYear:function(bg){var bh=z(this,1,4).year;return bg==null?bh:this.add("y",(bg-bh))},week:function(bg){var bh=this.lang().week(this);return bg==null?bh:this.add("d",(bg-bh)*7)},isoWeek:function(bg){var bh=z(this,1,4).week;return bg==null?bh:this.add("d",(bg-bh)*7)},weekday:function(bg){var bh=(this.day()+7-this.lang()._week.dow)%7;return bg==null?bh:this.add("d",bg-bh)},isoWeekday:function(bg){return bg==null?this.day()||7:this.day(this.day()%7?bg:bg-7)},isoWeeksInYear:function(){return aG(this.year(),1,4)},weeksInYear:function(){var bg=this._lang._week;return aG(this.year(),bg.dow,bg.doy)},get:function(bg){bg=aW(bg);return this[bg]()},set:function(bg,bh){bg=aW(bg);if(typeof this[bg]==="function"){this[bg](bh)}return this},lang:function(bg){if(bg===C){return this._lang}else{this._lang=aA(bg);return this}}});function ba(bg,bh){var bi;if(typeof bh==="string"){bh=bg.lang().monthsParse(bh);if(typeof bh!=="number"){return bg}}bi=Math.min(bg.date(),a5(bg.year(),bh));bg._d["set"+(bg._isUTC?"UTC":"")+"Month"](bh,bi);return bg}function be(bh,bg){return bh._d["get"+(bh._isUTC?"UTC":"")+bg]()}function aQ(bh,bg,bi){if(bg==="Month"){return ba(bh,bi)}else{return bh._d["set"+(bh._isUTC?"UTC":"")+bg](bi)}}function o(bg,bh){return function(bi){if(bi!=null){aQ(this,bg,bi);P.updateOffset(this,bh);return this}else{return be(this,bg)}}}P.fn.millisecond=P.fn.milliseconds=o("Milliseconds",false);P.fn.second=P.fn.seconds=o("Seconds",false);P.fn.minute=P.fn.minutes=o("Minutes",false);P.fn.hour=P.fn.hours=o("Hours",true);P.fn.date=o("Date",true);P.fn.dates=bd("dates accessor is deprecated. Use date instead.",o("Date",true));P.fn.year=o("FullYear",true);P.fn.years=bd("years accessor is deprecated. Use year instead.",o("FullYear",true));P.fn.days=P.fn.day;P.fn.months=P.fn.month;P.fn.weeks=P.fn.week;P.fn.isoWeeks=P.fn.isoWeek;P.fn.quarters=P.fn.quarter;P.fn.toJSON=P.fn.toISOString;aB(P.duration.fn=ad.prototype,{_bubble:function(){var bi=this._milliseconds,bn=this._days,bg=this._months,bl=this._data,bm,bk,bh,bj;bl.milliseconds=bi%1000;bm=k(bi/1000);bl.seconds=bm%60;bk=k(bm/60);bl.minutes=bk%60;bh=k(bk/60);bl.hours=bh%24;bn+=k(bh/24);bl.days=bn%30;bg+=k(bn/30);bl.months=bg%12;bj=k(bg/12);bl.years=bj},weeks:function(){return k(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*86400000+(this._months%12)*2592000000+K(this._months/12)*31536000000},humanize:function(bh){var bi=+this,bg=y(bi,!bh,this.lang());if(bh){bg=this.lang().pastFuture(bi,bg)}return this.lang().postformat(bg)},add:function(bg,bi){var bh=P.duration(bg,bi);this._milliseconds+=bh._milliseconds;this._days+=bh._days;this._months+=bh._months;this._bubble();return this},subtract:function(bg,bi){var bh=P.duration(bg,bi);this._milliseconds-=bh._milliseconds;this._days-=bh._days;this._months-=bh._months;this._bubble();return this},get:function(bg){bg=aW(bg);return this[bg.toLowerCase()+"s"]()},as:function(bg){bg=aW(bg);return this["as"+bg.charAt(0).toUpperCase()+bg.slice(1)+"s"]()},lang:P.fn.lang,toIsoString:function(){var bj=Math.abs(this.years()),bg=Math.abs(this.months()),bl=Math.abs(this.days()),bh=Math.abs(this.hours()),bi=Math.abs(this.minutes()),bk=Math.abs(this.seconds()+this.milliseconds()/1000);if(!this.asSeconds()){return"P0D"}return(this.asSeconds()<0?"-":"")+"P"+(bj?bj+"Y":"")+(bg?bg+"M":"")+(bl?bl+"D":"")+((bh||bi||bk)?"T":"")+(bh?bh+"H":"")+(bi?bi+"M":"")+(bk?bk+"S":"")}});function W(bg){P.duration.fn[bg]=function(){return this._data[bg]}}function ay(bg,bh){P.duration.fn["as"+bg]=function(){return +this/bh}}for(ab in B){if(B.hasOwnProperty(ab)){ay(ab,B[ab]);W(ab.toLowerCase())}}ay("Weeks",604800000);P.duration.fn.asMonths=function(){return(+this-this.years()*31536000000)/2592000000+this.years()*12};P.lang("en",{ordinal:function(bi){var bg=bi%10,bh=(K(bi%100/10)===1)?"th":(bg===1)?"st":(bg===2)?"nd":(bg===3)?"rd":"th";return bi+bh}});function R(bg){if(typeof ender!=="undefined"){return}al=a0.moment;if(bg){a0.moment=bd("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",P)}else{a0.moment=P}}if(ak){module.exports=P}else{if(typeof define==="function"&&define.amd){define("moment",function(bh,bg,bi){if(bi.config&&bi.config()&&bi.config().noGlobal===true){a0.moment=al}return P});R(true)}else{R()}}}).call(this);(function(a){if(typeof define==="function"&&define.amd){define(["jquery","moment"],a)}else{if(!jQuery){throw"bootstrap-datetimepicker requires jQuery to be loaded first"}else{if(!moment){throw"bootstrap-datetimepicker requires moment.js to be loaded first"}else{a(jQuery,moment)}}}}(function(d,e){if(typeof e==="undefined"){alert("momentjs is required");throw new Error("momentjs is required")}var c=0,a=e,b=function(p,s){var C=d.fn.datetimepicker.defaults,Q={time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down"},m=this,M=function(){var X=false,W,Y,U;m.options=d.extend({},C,s);m.options.icons=d.extend({},Q,m.options.icons);m.element=d(p);f();if(!(m.options.pickTime||m.options.pickDate)){throw new Error("Must choose at least one picker")}m.id=c++;a.lang(m.options.language);m.date=a();m.unset=false;m.isInput=m.element.is("input");m.component=false;if(m.element.hasClass("input-group")){if(m.element.find(".datepickerbutton").size()==0){m.component=m.element.find("[class^='input-group-']")}else{m.component=m.element.find(".datepickerbutton")}}m.format=m.options.format;U=a()._lang._longDateFormat;if(!m.format){m.format=(m.options.pickDate?U.L:"");if(m.options.pickDate&&m.options.pickTime){m.format+=" "}m.format+=(m.options.pickTime?U.LT:"");if(m.options.useSeconds){if(~U.LT.indexOf(" A")){m.format=m.format.split(" A")[0]+":ss A"}else{m.format+=":ss"}}}m.use24hours=m.format.toLowerCase().indexOf("a")<1;if(m.component){X=m.component.find("span")}if(m.options.pickTime){if(X){X.addClass(m.options.icons.time)}}if(m.options.pickDate){if(X){X.removeClass(m.options.icons.time);X.addClass(m.options.icons.date)}}m.options.widgetParent=typeof m.options.widgetParent=="string"&&m.options.widgetParent||m.element.parents().filter(function(){return"scroll"==d(this).css("overflow-y")}).get(0)||"body";m.widget=d(T()).appendTo(m.options.widgetParent);if(m.options.useSeconds&&!m.use24hours){}m.minViewMode=m.options.minViewMode||0;if(typeof m.minViewMode==="string"){switch(m.minViewMode){case"months":m.minViewMode=1;break;case"years":m.minViewMode=2;break;default:m.minViewMode=0;break}}m.viewMode=m.options.viewMode||0;if(typeof m.viewMode==="string"){switch(m.viewMode){case"months":m.viewMode=1;break;case"years":m.viewMode=2;break;default:m.viewMode=0;break}}m.options.disabledDates=E(m.options.disabledDates);m.options.enabledDates=E(m.options.enabledDates);m.startViewMode=m.viewMode;m.setMinDate(m.options.minDate);m.setMaxDate(m.options.maxDate);L();w();x();v();h();B();g();N();if(m.options.defaultDate!==""&&z().val()==""){m.setValue(m.options.defaultDate)}if(m.options.minuteStepping!==1){var V=m.options.minuteStepping;m.date.minutes((Math.round(m.date.minutes()/V)*V)%60).seconds(0)}},z=function(){var U;if(m.isInput){return m.element}else{U=m.element.find(".datepickerinput");if(U.size()===0){U=m.element.find("input")}else{if(!U.is("input")){throw new Error('CSS class "datepickerinput" cannot be applied to non input element')}}return U}},f=function(){var U;if(m.element.is("input")){U=m.element.data()}else{U=m.element.data()}if(U.dateFormat!==undefined){m.options.format=U.dateFormat}if(U.datePickdate!==undefined){m.options.pickDate=U.datePickdate}if(U.datePicktime!==undefined){m.options.pickTime=U.datePicktime}if(U.dateUseminutes!==undefined){m.options.useMinutes=U.dateUseminutes}if(U.dateUseseconds!==undefined){m.options.useSeconds=U.dateUseseconds}if(U.dateUsecurrent!==undefined){m.options.useCurrent=U.dateUsecurrent}if(U.dateMinutestepping!==undefined){m.options.minuteStepping=U.dateMinutestepping}if(U.dateMindate!==undefined){m.options.minDate=U.dateMindate}if(U.dateMaxdate!==undefined){m.options.maxDate=U.dateMaxdate}if(U.dateShowtoday!==undefined){m.options.showToday=U.dateShowtoday}if(U.dateCollapse!==undefined){m.options.collapse=U.dateCollapse}if(U.dateLanguage!==undefined){m.options.language=U.dateLanguage}if(U.dateDefaultdate!==undefined){m.options.defaultDate=U.dateDefaultdate}if(U.dateDisableddates!==undefined){m.options.disabledDates=U.dateDisableddates}if(U.dateEnableddates!==undefined){m.options.enabledDates=U.dateEnableddates}if(U.dateIcons!==undefined){m.options.icons=U.dateIcons}if(U.dateUsestrict!==undefined){m.options.useStrict=U.dateUsestrict}if(U.dateDirection!==undefined){m.options.direction=U.dateDirection}if(U.dateSidebyside!==undefined){m.options.sideBySide=U.dateSidebyside}},k=function(){var U="absolute",X=m.component?m.component.offset():m.element.offset(),W=d(window);m.width=m.component?m.component.outerWidth():m.element.outerWidth();X.top=X.top+m.element.outerHeight();var V;if(m.options.direction==="up"){V="top"}else{if(m.options.direction==="bottom"){V="bottom"}else{if(m.options.direction==="auto"){if(X.top+m.widget.height()>W.height()+W.scrollTop()&&m.widget.height()+m.element.outerHeight()<X.top){V="top"}else{V="bottom"}}}}if(V==="top"){X.top-=m.widget.height()+m.element.outerHeight()+15;m.widget.addClass("top").removeClass("bottom")}else{X.top+=1;m.widget.addClass("bottom").removeClass("top")}if(m.options.width!==undefined){m.widget.width(m.options.width)}if(m.options.orientation==="left"){m.widget.addClass("left-oriented");X.left=X.left-m.widget.width()+20}if(F()){U="fixed";X.top-=W.scrollTop();X.left-=W.scrollLeft()}if(W.width()<X.left+m.widget.outerWidth()){X.right=W.width()-X.left-m.width;X.left="auto";m.widget.addClass("pull-right")}else{X.right="auto";m.widget.removeClass("pull-right")}m.widget.css({position:U,top:X.top,left:X.left,right:X.right})},q=function(V,U){if(a(m.date).isSame(a(V))){return}m.element.trigger({type:"dp.change",date:a(m.date),oldDate:a(V)});if(U!=="change"){m.element.change()}},G=function(U){m.element.trigger({type:"dp.error",date:a(U)})},B=function(U){a.lang(m.options.language);var V=U;if(!V){V=z().val();if(V){m.date=a(V,m.format,m.options.useStrict)}if(!m.date){m.date=a()}}m.viewDate=a(m.date).startOf("month");o();l()},L=function(){a.lang(m.options.language);var W=d("<tr>"),U=a.weekdaysMin(),V;if(a()._lang._week.dow==0){for(V=0;V<7;V++){W.append('<th class="dow">'+U[V]+"</th>")}}else{for(V=1;V<8;V++){if(V==7){W.append('<th class="dow">'+U[0]+"</th>")}else{W.append('<th class="dow">'+U[V]+"</th>")}}}m.widget.find(".datepicker-days thead").append(W)},w=function(){a.lang(m.options.language);var V="",U=0,W=a.monthsShort();while(U<12){V+='<span class="month">'+W[U++]+"</span>"}m.widget.find(".datepicker-months td").append(V)},o=function(){if(!m.options.pickDate){return}a.lang(m.options.language);var ag=m.viewDate.year(),ae=m.viewDate.month(),af=m.options.minDate.year(),ai=m.options.minDate.month(),aj=m.options.maxDate.year(),ac=m.options.maxDate.month(),V,Y,ab,aa=[],ak,X,Z,ah,W,ad,U=a.months();m.widget.find(".datepicker-days").find(".disabled").removeClass("disabled");m.widget.find(".datepicker-months").find(".disabled").removeClass("disabled");m.widget.find(".datepicker-years").find(".disabled").removeClass("disabled");m.widget.find(".datepicker-days th:eq(1)").text(U[ae]+" "+ag);Y=a.utc(m.viewDate).subtract("months",1);ah=Y.daysInMonth();Y.date(ah).startOf("week");if((ag==af&&ae<=ai)||ag<af){m.widget.find(".datepicker-days th:eq(0)").addClass("disabled")}if((ag==aj&&ae>=ac)||ag>aj){m.widget.find(".datepicker-days th:eq(2)").addClass("disabled")}ab=a.utc(Y).add(42,"d");while(Y.isBefore(ab)){if(Y.weekday()===a.utc().startOf("week").weekday()){ak=d("<tr>");aa.push(ak)}X="";if(Y.year()<ag||(Y.year()==ag&&Y.month()<ae)){X+=" old"}else{if(Y.year()>ag||(Y.year()==ag&&Y.month()>ae)){X+=" new"}}if(Y.isSame(a.utc({y:m.date.year(),M:m.date.month(),d:m.date.date()}))){X+=" active"}if(S(Y,"day")||!u(Y)){X+=" disabled"}if(m.options.showToday===true){if(Y.isSame(a.utc(),"day")){X+=" today"}}if(m.options.daysOfWeekDisabled){for(Z in m.options.daysOfWeekDisabled){if(Y.day()==m.options.daysOfWeekDisabled[Z]){X+=" disabled";break}}}ak.append('<td class="day'+X+'">'+Y.date()+"</td>");V=Y.date();Y.add(1,"d");if(V==Y.date()){Y.add(1,"d")}}m.widget.find(".datepicker-days tbody").empty().append(aa);ad=m.date.year(),U=m.widget.find(".datepicker-months").find("th:eq(1)").text(ag).end().find("span").removeClass("active");if(ad===ag){U.eq(m.date.month()).addClass("active")}if(ad-1<af){m.widget.find(".datepicker-months th:eq(0)").addClass("disabled")}if(ad+1>aj){m.widget.find(".datepicker-months th:eq(2)").addClass("disabled")}for(Z=0;Z<12;Z++){if((ag==af&&ai>Z)||(ag<af)){d(U[Z]).addClass("disabled")}else{if((ag==aj&&ac<Z)||(ag>aj)){d(U[Z]).addClass("disabled")}}}aa="";ag=parseInt(ag/10,10)*10;W=m.widget.find(".datepicker-years").find("th:eq(1)").text(ag+"-"+(ag+9)).end().find("td");m.widget.find(".datepicker-years").find("th").removeClass("disabled");if(af>ag){m.widget.find(".datepicker-years").find("th:eq(0)").addClass("disabled")}if(aj<ag+9){m.widget.find(".datepicker-years").find("th:eq(2)").addClass("disabled")}ag-=1;for(Z=-1;Z<11;Z++){aa+='<span class="year'+(Z===-1||Z===10?" old":"")+(ad===ag?" active":"")+((ag<af||ag>aj)?" disabled":"")+'">'+ag+"</span>";ag+=1}W.html(aa)},x=function(){a.lang(m.options.language);var X=m.widget.find(".timepicker .timepicker-hours table"),W="",Y,V,U;X.parent().hide();if(m.use24hours){Y=0;for(V=0;V<6;V+=1){W+="<tr>";for(U=0;U<4;U+=1){W+='<td class="hour">'+R(Y.toString())+"</td>";Y++}W+="</tr>"}}else{Y=1;for(V=0;V<3;V+=1){W+="<tr>";for(U=0;U<4;U+=1){W+='<td class="hour">'+R(Y.toString())+"</td>";Y++}W+="</tr>"}}X.html(W)},v=function(){var Y=m.widget.find(".timepicker .timepicker-minutes table"),W="",Z=0,V,U,X=m.options.minuteStepping;Y.parent().hide();if(X==1){X=5}for(V=0;V<Math.ceil(60/X/4);V++){W+="<tr>";for(U=0;U<4;U+=1){if(Z<60){W+='<td class="minute">'+R(Z.toString())+"</td>";Z+=X}else{W+="<td></td>"}}W+="</tr>"}Y.html(W)},h=function(){var X=m.widget.find(".timepicker .timepicker-seconds table"),W="",Y=0,V,U;X.parent().hide();for(V=0;V<3;V++){W+="<tr>";for(U=0;U<4;U+=1){W+='<td class="second">'+R(Y.toString())+"</td>";Y+=5}W+="</tr>"}X.html(W)},l=function(){if(!m.date){return}var W=m.widget.find(".timepicker span[data-time-component]"),U=m.date.hours(),V="AM";if(!m.use24hours){if(U>=12){V="PM"}if(U===0){U=12}else{if(U!=12){U=U%12}}m.widget.find(".timepicker [data-action=togglePeriod]").text(V)}W.filter("[data-time-component=hours]").text(R(U));W.filter("[data-time-component=minutes]").text(R(m.date.minutes()));W.filter("[data-time-component=seconds]").text(R(m.date.second()))},D=function(aa){aa.stopPropagation();aa.preventDefault();m.unset=false;var Z=d(aa.target).closest("span, td, th"),Y,W,X,U,V=a(m.date);if(Z.length===1){if(!Z.is(".disabled")){switch(Z[0].nodeName.toLowerCase()){case"th":switch(Z[0].className){case"switch":g(1);break;case"prev":case"next":X=y.modes[m.viewMode].navStep;if(Z[0].className==="prev"){X=X*-1}m.viewDate.add(X,y.modes[m.viewMode].navFnc);o();break}break;case"span":if(Z.is(".month")){Y=Z.parent().find("span").index(Z);m.viewDate.month(Y)}else{W=parseInt(Z.text(),10)||0;m.viewDate.year(W)}if(m.viewMode===m.minViewMode){m.date=a({y:m.viewDate.year(),M:m.viewDate.month(),d:m.viewDate.date(),h:m.date.hours(),m:m.date.minutes(),s:m.date.seconds()});q(V,aa.type);t()}g(-1);o();break;case"td":if(Z.is(".day")){U=parseInt(Z.text(),10)||1;Y=m.viewDate.month();W=m.viewDate.year();if(Z.is(".old")){if(Y===0){Y=11;W-=1}else{Y-=1}}else{if(Z.is(".new")){if(Y==11){Y=0;W+=1}else{Y+=1}}}m.date=a({y:W,M:Y,d:U,h:m.date.hours(),m:m.date.minutes(),s:m.date.seconds()});m.viewDate=a({y:W,M:Y,d:Math.min(28,U)});o();t();q(V,aa.type)}break}}}},H={incrementHours:function(){n("add","hours",1)},incrementMinutes:function(){n("add","minutes",m.options.minuteStepping)},incrementSeconds:function(){n("add","seconds",1)},decrementHours:function(){n("subtract","hours",1)},decrementMinutes:function(){n("subtract","minutes",m.options.minuteStepping)},decrementSeconds:function(){n("subtract","seconds",1)},togglePeriod:function(){var U=m.date.hours();if(U>=12){U-=12}else{U+=12}m.date.hours(U)},showPicker:function(){m.widget.find(".timepicker > div:not(.timepicker-picker)").hide();m.widget.find(".timepicker .timepicker-picker").show()},showHours:function(){m.widget.find(".timepicker .timepicker-picker").hide();m.widget.find(".timepicker .timepicker-hours").show()},showMinutes:function(){m.widget.find(".timepicker .timepicker-picker").hide();m.widget.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){m.widget.find(".timepicker .timepicker-picker").hide();m.widget.find(".timepicker .timepicker-seconds").show()},selectHour:function(V){var W=m.widget.find(".timepicker [data-action=togglePeriod]").text(),U=parseInt(d(V.target).text(),10);if(W=="PM"){U+=12}m.date.hours(U);H.showPicker.call(m)},selectMinute:function(U){m.date.minutes(parseInt(d(U.target).text(),10));H.showPicker.call(m)},selectSecond:function(U){m.date.seconds(parseInt(d(U.target).text(),10));H.showPicker.call(m)}},A=function(W){var U=a(m.date),V=d(W.currentTarget).data("action"),X=H[V].apply(m,arguments);O(W);if(!m.date){m.date=a({y:1970})}t();l();q(U,W.type);return X},O=function(U){U.stopPropagation();U.preventDefault()},r=function(U){if(U.keyCode===27){m.hide()}},j=function(X){a.lang(m.options.language);var V=d(X.target),W=a(m.date),U=a(V.val(),m.format,m.options.useStrict);if(U.isValid()&&!S(U)&&u(U)){B();m.setValue(U);q(W,X.type);t()}else{m.viewDate=W;m.unset=true;q(W,X.type);G(U)}},g=function(U){if(U){m.viewMode=Math.max(m.minViewMode,Math.min(2,m.viewMode+U))}var V=y.modes[m.viewMode].clsName;m.widget.find(".datepicker > div").hide().filter(".datepicker-"+y.modes[m.viewMode].clsName).show()},N=function(){var Y,X,V,U,W;m.widget.on("click",".datepicker *",d.proxy(D,this));m.widget.on("click","[data-action]",d.proxy(A,this));m.widget.on("mousedown",d.proxy(O,this));m.element.on("keydown",d.proxy(r,this));if(m.options.pickDate&&m.options.pickTime){m.widget.on("click.togglePicker",".accordion-toggle",function(Z){Z.stopPropagation();Y=d(this);X=Y.closest("ul");V=X.find(".in");U=X.find(".collapse:not(.in)");if(V&&V.length){W=V.data("collapse");if(W&&W.transitioning){return}V.collapse("hide");U.collapse("show");Y.find("span").toggleClass(m.options.icons.time+" "+m.options.icons.date);m.element.find(".input-group-addon span").toggleClass(m.options.icons.time+" "+m.options.icons.date)}})}if(m.isInput){m.element.on({focus:d.proxy(m.show,this),change:d.proxy(j,this),blur:d.proxy(m.hide,this)})}else{m.element.on({change:d.proxy(j,this)},"input");if(m.component){m.component.on("click",d.proxy(m.show,this))}else{m.element.on("click",d.proxy(m.show,this))}}},P=function(){d(window).on("resize.datetimepicker"+m.id,d.proxy(k,this));if(!m.isInput){d(document).on("mousedown.datetimepicker"+m.id,d.proxy(m.hide,this))}},J=function(){m.widget.off("click",".datepicker *",m.click);m.widget.off("click","[data-action]");m.widget.off("mousedown",m.stopEvent);if(m.options.pickDate&&m.options.pickTime){m.widget.off("click.togglePicker")}if(m.isInput){m.element.off({focus:m.show,change:m.change})}else{m.element.off({change:m.change},"input");if(m.component){m.component.off("click",m.show)}else{m.element.off("click",m.show)}}},I=function(){d(window).off("resize.datetimepicker"+m.id);if(!m.isInput){d(document).off("mousedown.datetimepicker"+m.id)}},F=function(){if(m.element){var V=m.element.parents(),U=false,W;for(W=0;W<V.length;W++){if(d(V[W]).css("position")=="fixed"){U=true;break}}return U}else{return false}},t=function(){a.lang(m.options.language);var V="",U;if(!m.unset){V=a(m.date).format(m.format)}z().val(V);m.element.data("date",V);if(!m.options.pickTime){m.hide()}},n=function(X,W,V){a.lang(m.options.language);var U;if(X=="add"){U=a(m.date);if(U.hours()==23){U.add(V,W)}U.add(V,W)}else{U=a(m.date).subtract(V,W)}if(S(a(U.subtract(V,W)))||S(U)){G(U.format(m.format));return}if(X=="add"){m.date.add(V,W)}else{m.date.subtract(V,W)}m.unset=false},S=function(U,W){a.lang(m.options.language);var X=m.options.maxDate;var V=m.options.minDate;if(W){X=a(X).endOf(W);V=a(V).startOf(W)}if(U.isAfter(X)||U.isBefore(V)){return true}if(m.options.disabledDates===false){return false}return m.options.disabledDates[a(U).format("YYYY-MM-DD")]===true},u=function(U){a.lang(m.options.language);if(m.options.enabledDates===false){return true}return m.options.enabledDates[a(U).format("YYYY-MM-DD")]===true},E=function(W){var X={},U=0,V;for(V=0;V<W.length;V++){dDate=a(W[V]);if(dDate.isValid()){X[dDate.format("YYYY-MM-DD")]=true;U++}}if(U>0){return X}return false},R=function(U){U=U.toString();if(U.length>=2){return U}else{return"0"+U}},T=function(){if(m.options.pickDate&&m.options.pickTime){var U="";U='<div class="bootstrap-datetimepicker-widget'+(m.options.sideBySide?" timepicker-sbs":"")+' dropdown-menu" style="z-index:9999 !important;">';if(m.options.sideBySide){U+='<div class="row"><div class="col-sm-6 datepicker">'+y.template+'</div><div class="col-sm-6 timepicker">'+K.getTemplate()+"</div></div>"}else{U+='<ul class="list-unstyled"><li'+(m.options.collapse?' class="collapse in"':"")+'><div class="datepicker">'+y.template+'</div></li><li class="picker-switch accordion-toggle"><a class="btn" style="width:100%"><span class="'+m.options.icons.time+'"></span></a></li><li'+(m.options.collapse?' class="collapse"':"")+'><div class="timepicker">'+K.getTemplate()+"</div></li></ul>"}U+="</div>";return U}else{if(m.options.pickTime){return('<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="timepicker">'+K.getTemplate()+"</div></div>")}else{return('<div class="bootstrap-datetimepicker-widget dropdown-menu"><div class="datepicker">'+y.template+"</div></div>")}}},y={modes:[{clsName:"days",navFnc:"month",navStep:1},{clsName:"months",navFnc:"year",navStep:1},{clsName:"years",navFnc:"year",navStep:10}],headTemplate:'<thead><tr><th class="prev">&lsaquo;</th><th colspan="5" class="switch"></th><th class="next">&rsaquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>'},K={hourTemplate:'<span data-action="showHours"   data-time-component="hours"   class="timepicker-hour"></span>',minuteTemplate:'<span data-action="showMinutes" data-time-component="minutes" class="timepicker-minute"></span>',secondTemplate:'<span data-action="showSeconds"  data-time-component="seconds" class="timepicker-second"></span>'};y.template='<div class="datepicker-days"><table class="table-condensed">'+y.headTemplate+'<tbody></tbody></table></div><div class="datepicker-months"><table class="table-condensed">'+y.headTemplate+y.contTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+y.headTemplate+y.contTemplate+"</table></div>";K.getTemplate=function(){return('<div class="timepicker-picker"><table class="table-condensed"><tr><td><a href="#" class="btn" data-action="incrementHours"><span class="'+m.options.icons.up+'"></span></a></td><td class="separator"></td><td>'+(m.options.useMinutes?'<a href="#" class="btn" data-action="incrementMinutes"><span class="'+m.options.icons.up+'"></span></a>':"")+"</td>"+(m.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="incrementSeconds"><span class="'+m.options.icons.up+'"></span></a></td>':"")+(m.use24hours?"":'<td class="separator"></td>')+"</tr><tr><td>"+K.hourTemplate+'</td> <td class="separator">:</td><td>'+(m.options.useMinutes?K.minuteTemplate:'<span class="timepicker-minute">00</span>')+"</td> "+(m.options.useSeconds?'<td class="separator">:</td><td>'+K.secondTemplate+"</td>":"")+(m.use24hours?"":'<td class="separator"></td><td><button type="button" class="btn btn-primary" data-action="togglePeriod"></button></td>')+'</tr><tr><td><a href="#" class="btn" data-action="decrementHours"><span class="'+m.options.icons.down+'"></span></a></td><td class="separator"></td><td>'+(m.options.useMinutes?'<a href="#" class="btn" data-action="decrementMinutes"><span class="'+m.options.icons.down+'"></span></a>':"")+"</td>"+(m.options.useSeconds?'<td class="separator"></td><td><a href="#" class="btn" data-action="decrementSeconds"><span class="'+m.options.icons.down+'"></span></a></td>':"")+(m.use24hours?"":'<td class="separator"></td>')+'</tr></table></div><div class="timepicker-hours" data-action="selectHour"><table class="table-condensed"></table></div><div class="timepicker-minutes" data-action="selectMinute"><table class="table-condensed"></table></div>'+(m.options.useSeconds?'<div class="timepicker-seconds" data-action="selectSecond"><table class="table-condensed"></table></div>':""))};m.destroy=function(){J();I();m.widget.remove();m.element.removeData("DateTimePicker");if(m.component){m.component.removeData("DateTimePicker")}};m.show=function(W){if(m.options.useCurrent){if(z().val()==""){if(m.options.minuteStepping!==1){var V=a(),U=m.options.minuteStepping;V.minutes((Math.round(V.minutes()/U)*U)%60).seconds(0);m.setValue(V.format(m.format))}else{m.setValue(a().format(m.format))}q("",W.type)}}if(m.widget.hasClass("picker-open")){m.widget.hide();m.widget.removeClass("picker-open")}else{m.widget.show();m.widget.addClass("picker-open")}m.height=m.component?m.component.outerHeight():m.element.outerHeight();k();m.element.trigger({type:"dp.show",date:a(m.date)});P();if(W){O(W)}},m.disable=function(){var U=m.element.find("input");if(U.prop("disabled")){return}U.prop("disabled",true);J()},m.enable=function(){var U=m.element.find("input");if(!U.prop("disabled")){return}U.prop("disabled",false);N()},m.hide=function(W){if(W&&d(W.target).is("#"+m.element.attr("id"))){return}var X=m.widget.find(".collapse"),U,V;for(U=0;U<X.length;U++){V=X.eq(U).data("collapse");if(V&&V.transitioning){return}}m.widget.hide();m.widget.removeClass("picker-open");m.viewMode=m.startViewMode;g();m.element.trigger({type:"dp.hide",date:a(m.date)});I()},m.setValue=function(U){a.lang(m.options.language);if(!U){m.unset=true;t()}else{m.unset=false}if(!a.isMoment(U)){U=(U instanceof Date)?a(U):a(U,m.format)}if(U.isValid()){m.date=U;t();m.viewDate=a({y:m.date.year(),M:m.date.month()});o();l()}else{G(U)}},m.getDate=function(){if(m.unset){return null}return a(m.date)},m.setDate=function(U){var V=a(m.date);if(!U){m.setValue(null)}else{m.setValue(U)}q(V,"function")},m.setDisabledDates=function(U){m.options.disabledDates=E(U);if(m.viewDate){B()}},m.setEnabledDates=function(U){m.options.enabledDates=E(U);if(m.viewDate){B()}},m.setMaxDate=function(U){if(U==undefined){return}m.options.maxDate=a(U);if(m.viewDate){B()}},m.setMinDate=function(U){if(U==undefined){return}m.options.minDate=a(U);if(m.viewDate){B()}};M()};d.fn.datetimepicker=function(f){return this.each(function(){var h=d(this),g=h.data("DateTimePicker");if(!g){h.data("DateTimePicker",new b(this,f))}})};d.fn.datetimepicker.defaults={pickDate:true,pickTime:true,useMinutes:true,useSeconds:false,useCurrent:true,minuteStepping:1,minDate:new a({y:1900}),maxDate:new a().add(100,"y"),showToday:true,collapse:true,language:"en",defaultDate:"",disabledDates:false,enabledDates:false,icons:{},useStrict:false,direction:"auto",sideBySide:false,daysOfWeekDisabled:false,widgetParent:false,}}));(function(){function c(g){var j,f,h;if(!this.length){return this}j=(this[0]);if(j.ownerDocument){h=j.ownerDocument}else{h=j;j=h.documentElement}if(g==null){if(!((h.exitFullscreen)||(h.webkitExitFullscreen)||(h.webkitCancelFullScreen)||(h.msExitFullscreen)||(h.mozCancelFullScreen))){return null}g=!!h.fullscreenElement||!!h.msFullscreenElement||!!h.webkitIsFullScreen||!!h.mozFullScreen;if(!g){return g}return(h.fullscreenElement)||(h.webkitFullscreenElement)||(h.webkitCurrentFullScreenElement)||(h.msFullscreenElement)||(h.mozFullScreenElement)||g}if(g){f=(j.requestFullscreen)||(j.webkitRequestFullscreen)||(j.webkitRequestFullScreen)||(j.msRequestFullscreen)||(j.mozRequestFullScreen);if(f){f.call(j)}return this}else{f=(h.exitFullscreen)||(h.webkitExitFullscreen)||(h.webkitCancelFullScreen)||(h.msExitFullscreen)||(h.mozCancelFullScreen);if(f){f.call(h)}return this}}function e(){return(c.call(this,!c.call(this)))}function b(f){jQuery(document).trigger(new jQuery.Event("fullscreenchange"))}function d(f){jQuery(document).trigger(new jQuery.Event("fullscreenerror"))}function a(){var g,h,f;g=document;if(g.webkitCancelFullScreen){h="webkitfullscreenchange";f="webkitfullscreenerror"}else{if(g.msExitFullscreen){h="MSFullscreenChange";f="MSFullscreenError"}else{if(g.mozCancelFullScreen){h="mozfullscreenchange";f="mozfullscreenerror"}else{h="fullscreenchange";f="fullscreenerror"}}}jQuery(document).bind(h,b);jQuery(document).bind(f,d)}jQuery.fn.fullScreen=c;jQuery.fn.toggleFullScreen=e;a()})();(function(b){b.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~","1":"!","2":"@","3":"#","4":"$","5":"%","6":"^","7":"&","8":"*","9":"(","0":")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};function a(d){if(typeof d.data==="string"){d.data={keys:d.data}}if(!d.data||!d.data.keys||typeof d.data.keys!=="string"){return}var c=d.handler,e=d.data.keys.toLowerCase().split(" "),f=["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"];d.handler=function(n){if(this!==n.target&&(/textarea|select/i.test(n.target.nodeName)||b.inArray(n.target.type,f)>-1)){return}var j=b.hotkeys.specialKeys[n.keyCode],o=String.fromCharCode(n.which).toLowerCase(),m="",h={};b.each(["alt","ctrl","meta","shift"],function(l,p){if(n[p+"Key"]&&j!==p){m+=p+"+"}});m=m.replace("alt+ctrl+meta+shift","hyper");if(j){h[m+j]=true}if(o){h[m+o]=true;h[m+b.hotkeys.shiftNums[o]]=true;if(m==="shift+"){h[b.hotkeys.shiftNums[o]]=true}}for(var k=0,g=e.length;k<g;k++){if(h[e[k]]){return c.apply(this,arguments)}}}}b.each(["keydown","keyup","keypress"],function(){b.event.special[this]={add:a}})})(this.jQuery);(function(){Sanitize=function(){var b,c,a;a=arguments[0]||{};this.config={};this.config.elements=a.elements?a.elements:[];this.config.attributes=a.attributes?a.attributes:{};this.config.attributes[Sanitize.ALL]=this.config.attributes[Sanitize.ALL]?this.config.attributes[Sanitize.ALL]:[];this.config.allow_comments=a.allow_comments?a.allow_comments:false;this.allowed_elements={};this.config.protocols=a.protocols?a.protocols:{};this.config.add_attributes=a.add_attributes?a.add_attributes:{};this.dom=a.dom?a.dom:document;for(b=0;b<this.config.elements.length;b++){this.allowed_elements[this.config.elements[b]]=true}this.config.remove_element_contents={};this.config.remove_all_contents=false;if(a.remove_contents){if(a.remove_contents instanceof Array){for(b=0;b<a.remove_contents.length;b++){this.config.remove_element_contents[a.remove_contents[b]]=true}}else{this.config.remove_all_contents=true}}this.transformers=a.transformers?a.transformers:[]};Sanitize.REGEX_PROTOCOL=/^([A-Za-z0-9\+\-\.\&\;\*\s]*?)(?:\:|&*0*58|&*x0*3a)/i;Sanitize.RELATIVE="__RELATIVE__";Sanitize.ALL="__ALL__";Sanitize.prototype.clean_node=function(c){var d=this.dom.createDocumentFragment();this.current_element=d;this.whitelist_nodes=[];function g(k,j){var h;for(h=0;h<j.length;h++){if(j[h]==k){return h}}return -1}function b(){var h=[];var m={};var l,k;for(l=0;l<arguments.length;l++){if(!arguments[l]||!arguments[l].length){continue}for(k=0;k<arguments[l].length;k++){if(m[arguments[l][k]]){continue}m[arguments[l][k]]=true;h.push(arguments[l][k])}}return h}function f(h){var j;switch(h.nodeType){case 1:e.call(this,h);break;case 3:j=h.cloneNode(false);this.current_element.appendChild(j);break;case 5:j=h.cloneNode(false);this.current_element.appendChild(j);break;case 8:if(this.config.allow_comments){j=h.cloneNode(false);this.current_element.appendChild(j)}break;default:if(console&&console.log){console.log("unknown node type",h.nodeType)}break}}function e(n){var p,o,r,w,h,m,q,x,k,t,v,s;var l=a.call(this,n);n=l.node;h=n.nodeName.toLowerCase();w=this.current_element;if(this.allowed_elements[h]||l.whitelist){this.current_element=this.dom.createElement(n.nodeName);w.appendChild(this.current_element);var u=this.config.attributes;m=b(u[h],u[Sanitize.ALL],l.attr_whitelist);for(p=0;p<m.length;p++){x=m[p];q=n.attributes[x];if(q){s=true;if(this.config.protocols[h]&&this.config.protocols[h][x]){t=this.config.protocols[h][x];v=q.nodeValue.toLowerCase().match(Sanitize.REGEX_PROTOCOL);if(v){s=(g(v[1],t)!=-1)}else{s=(g(Sanitize.RELATIVE,t)!=-1)}}if(s){k=document.createAttribute(x);k.value=q.nodeValue;this.current_element.setAttributeNode(k)}}}if(this.config.add_attributes[h]){for(x in this.config.add_attributes[h]){k=document.createAttribute(x);k.value=this.config.add_attributes[h][x];this.current_element.setAttributeNode(k)}}}else{if(g(n,this.whitelist_nodes)!=-1){this.current_element=n.cloneNode(true);while(this.current_element.childNodes.length>0){this.current_element.removeChild(this.current_element.firstChild)}w.appendChild(this.current_element)}}if(!this.config.remove_all_contents&&!this.config.remove_element_contents[h]){for(p=0;p<n.childNodes.length;p++){f.call(this,n.childNodes[p])}}if(this.current_element.normalize){this.current_element.normalize()}this.current_element=w}function a(n){var h={attr_whitelist:[],node:n,whitelist:false};var m,l,k;for(m=0;m<this.transformers.length;m++){k=this.transformers[m]({allowed_elements:this.allowed_elements,config:this.config,node:n,node_name:n.nodeName.toLowerCase(),whitelist_nodes:this.whitelist_nodes,dom:this.dom});if(k==null){continue}else{if(typeof k=="object"){if(k.whitelist_nodes&&k.whitelist_nodes instanceof Array){for(l=0;l<k.whitelist_nodes.length;l++){if(g(k.whitelist_nodes[l],this.whitelist_nodes)==-1){this.whitelist_nodes.push(k.whitelist_nodes[l])}}}h.whitelist=k.whitelist?true:false;if(k.attr_whitelist){h.attr_whitelist=b(h.attr_whitelist,k.attr_whitelist)}h.node=k.node?k.node:h.node}else{throw new Error("transformer output must be an object or null")}}}return h}for(i=0;i<c.childNodes.length;i++){f.call(this,c.childNodes[i])}if(d.normalize){d.normalize()}return d};if(typeof define==="function"){define("sanitize",[],function(){return Sanitize})}if(!Sanitize.Config){Sanitize.Config={}}Sanitize.Config.RELAXED={elements:["a","b","blockquote","br","caption","cite","code","col","colgroup","dd","dl","dt","em","h1","h2","h3","h4","h5","h6","i","img","li","ol","p","pre","q","small","strike","strong","sub","sup","table","tbody","td","tfoot","th","thead","tr","u","ul"],attributes:{a:["href","title"],blockquote:["cite"],col:["span","width"],colgroup:["span","width"],img:["align","alt","height","src","title","width"],ol:["start","type"],q:["cite"],table:["summary","width"],td:["abbr","axis","colspan","rowspan","width"],th:["abbr","axis","colspan","rowspan","scope","width"],ul:["type"]},protocols:{a:{href:["ftp","http","https","mailto",Sanitize.RELATIVE]},blockquote:{cite:["http","https",Sanitize.RELATIVE]},img:{src:["http","https",Sanitize.RELATIVE]},q:{cite:["http","https",Sanitize.RELATIVE]}}}})();(function(b){var a=function(e){var c=b.Deferred(),d=new FileReader();d.onload=function(f){c.resolve(f.target.result)};d.onerror=c.reject;d.onprogress=c.notify;d.readAsDataURL(e);return c.promise()};b.fn.cleanHtml=function(){var c=b(this).html();return c&&c.replace(/(<br>|\s|<div><br><\/div>|&nbsp;)*$/,"")};b.fn.wysiwyg=function(l){var m=this,h,r,d,q=function(){if(r.activeToolbarClass){b(r.toolbarSelector,m.parent()).find(d).each(function(){var s=b(this).data(r.commandRole);if(document.queryCommandState(s)){b(this).addClass(r.activeToolbarClass)}else{b(this).removeClass(r.activeToolbarClass)}})}},p=function(s,t){var v=s.split(" "),w=v.shift(),u=v.join(" ")+(t||"");document.execCommand(w,0,u);q()},f=function(s){b.each(s,function(t,u){m.keydown(t,function(v){if(m.attr("contenteditable")&&m.is(":visible")){v.preventDefault();v.stopPropagation();p(u)}}).keyup(t,function(v){if(m.attr("contenteditable")&&m.is(":visible")){v.preventDefault();v.stopPropagation()}})})},g=function(){var s=window.getSelection();if(s.getRangeAt&&s.rangeCount){return s.getRangeAt(0)}},j=function(){h=g()},e=function(){var t=window.getSelection();if(h){try{t.removeAllRanges()}catch(s){document.body.createTextRange().select();document.selection.empty()}t.addRange(h)}},k=function(s){m.focus();b.each(s,function(t,u){if(/^image\//.test(u.type)){b.when(a(u)).done(function(v){p("insertimage",v)}).fail(function(v){r.fileUploadError("file-reader",v)})}else{r.fileUploadError("unsupported-file-type",u.type)}})},c=function(t,s){e();if(document.queryCommandSupported("hiliteColor")){document.execCommand("hiliteColor",0,s||"transparent")}j();t.data(r.selectionMarker,s)},n=function(t,s){t.find(d).click(function(){e();m.focus();p(b(this).data(s.commandRole));j()});t.find("[data-toggle=dropdown]").click(e);t.find("input[type=text][data-"+s.commandRole+"]").on("webkitspeechchange change",function(){var u=this.value;this.value="";e();if(u){m.focus();p(b(this).data(s.commandRole),u)}j()}).on("focus",function(){var u=b(this);if(!u.data(s.selectionMarker)){c(u,s.selectionColor);u.focus()}}).on("blur",function(){var u=b(this);if(u.data(s.selectionMarker)){c(u,false)}});t.find("input[type=file][data-"+s.commandRole+"]").change(function(){e();if(this.type==="file"&&this.files&&this.files.length>0){k(this.files)}j();this.value=""})},o=function(){m.on("dragenter dragover",false).on("drop",function(t){var s=t.originalEvent.dataTransfer;t.stopPropagation();t.preventDefault();if(s&&s.files&&s.files.length>0){k(s.files)}})};r=b.extend({},b.fn.wysiwyg.defaults,l);d="a[data-"+r.commandRole+"],button[data-"+r.commandRole+"],input[type=button][data-"+r.commandRole+"]";f(r.hotKeys);if(r.dragAndDropImages){o()}n(b(r.toolbarSelector,m.parent()),r);m.attr("contenteditable",true).on("mouseup keyup mouseout",function(){j();q()});b(window).bind("touchend",function(v){var u=(m.is(v.target)||m.has(v.target).length>0),t=g(),s=t&&(t.startContainer===t.endContainer&&t.startOffset===t.endOffset);if(!s||u){j();q()}});return this};b.fn.wysiwyg.defaults={hotKeys:{"ctrl+b meta+b":"bold","ctrl+i meta+i":"italic","ctrl+u meta+u":"underline","ctrl+z meta+z":"undo","ctrl+y meta+y meta+shift+z":"redo","ctrl+l meta+l":"justifyleft","ctrl+r meta+r":"justifyright","ctrl+e meta+e":"justifycenter","ctrl+j meta+j":"justifyfull","shift+tab":"outdent",tab:"indent"},toolbarSelector:"[data-role=editor-toolbar]",commandRole:"edit",activeToolbarClass:"btn-primary",selectionMarker:"edit-focus-marker",selectionColor:"darkgrey",dragAndDropImages:true,fileUploadError:function(d,c){console.log("File upload error",d,c)}}}(window.jQuery));
/*!
 * typeahead.js 0.10.5
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2014 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(b){var r=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(v){return !v||/^\s*$/.test(v)},escapeRegExChars:function(v){return v.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(v){return typeof v==="string"},isNumber:function(v){return typeof v==="number"},isArray:b.isArray,isFunction:b.isFunction,isObject:b.isPlainObject,isUndefined:function(v){return typeof v==="undefined"},toStr:function u(v){return r.isUndefined(v)||v===null?"":v+""},bind:b.proxy,each:function(x,v){b.each(x,w);function w(y,z){return v(z,y)}},map:b.map,filter:b.grep,every:function(w,x){var v=true;if(!w){return v}b.each(w,function(y,z){if(!(v=x.call(null,z,y,w))){return false}});return !!v},some:function(w,x){var v=false;if(!w){return v}b.each(w,function(y,z){if(v=x.call(null,z,y,w)){return false}});return !!v},mixin:b.extend,getUniqueId:function(){var v=0;return function(){return v++}}(),templatify:function t(w){return b.isFunction(w)?w:v;function v(){return String(w)}},defer:function(v){setTimeout(v,0)},debounce:function(x,z,w){var y,v;return function(){var D=this,C=arguments,B,A;B=function(){y=null;if(!w){v=x.apply(D,C)}};A=w&&!y;clearTimeout(y);y=setTimeout(B,z);if(A){v=x.apply(D,C)}return v}},throttle:function(A,C){var y,x,B,v,z,w;z=0;w=function(){z=new Date();B=null;v=A.apply(y,x)};return function(){var D=new Date(),E=C-(D-z);y=this;x=arguments;if(E<=0){clearTimeout(B);B=null;z=D;v=A.apply(y,x)}else{if(!B){B=setTimeout(w,E)}}return v}},noop:function(){}}}();var m="0.10.5";var o=function(){return{nonword:t,whitespace:u,obj:{nonword:v(t),whitespace:v(u)}};function u(w){w=r.toStr(w);return w?w.split(/\s+/):[]}function t(w){w=r.toStr(w);return w?w.split(/\W+/):[]}function v(x){return function w(){var y=[].slice.call(arguments,0);return function z(B){var A=[];r.each(y,function(C){A=A.concat(x(r.toStr(B[C])))});return A}}}}();var d=function(){function u(B){this.maxSize=r.isNumber(B)?B:100;this.reset();if(this.maxSize<=0){this.set=this.get=b.noop}}r.mixin(u.prototype,{set:function A(B,E){var D=this.list.tail,C;if(this.size>=this.maxSize){this.list.remove(D);delete this.hash[D.key]}if(C=this.hash[B]){C.val=E;this.list.moveToFront(C)}else{C=new v(B,E);this.list.add(C);this.hash[B]=C;this.size++}},get:function w(B){var C=this.hash[B];if(C){this.list.moveToFront(C);return C.val}},reset:function y(){this.size=0;this.hash={};this.list=new x()}});function x(){this.head=this.tail=null}r.mixin(x.prototype,{add:function z(B){if(this.head){B.next=this.head;this.head.prev=B}this.head=B;this.tail=this.tail||B},remove:function t(B){B.prev?B.prev.next=B.next:this.head=B.next;B.next?B.next.prev=B.prev:this.tail=B.prev},moveToFront:function(B){this.remove(B);this.add(B)}});function v(B,C){this.key=B;this.val=C;this.prev=this.next=null}return u}();var p=function(){var t,u;try{t=window.localStorage;t.setItem("~~~","!");t.removeItem("~~~")}catch(y){t=null}function w(A){this.prefix=["__",A,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+r.escapeRegExChars(this.prefix))}if(t&&window.JSON){u={_prefix:function(A){return this.prefix+A},_ttlKey:function(A){return this._prefix(A)+this.ttlKey},get:function(A){if(this.isExpired(A)){this.remove(A)}return z(t.getItem(this._prefix(A)))},set:function(B,C,A){if(r.isNumber(A)){t.setItem(this._ttlKey(B),x(v()+A))}else{t.removeItem(this._ttlKey(B))}return t.setItem(this._prefix(B),x(C))},remove:function(A){t.removeItem(this._ttlKey(A));t.removeItem(this._prefix(A));return this},clear:function(){var C,B,D=[],A=t.length;for(C=0;C<A;C++){if((B=t.key(C)).match(this.keyMatcher)){D.push(B.replace(this.keyMatcher,""))}}for(C=D.length;C--;){this.remove(D[C])}return this},isExpired:function(B){var A=z(t.getItem(this._ttlKey(B)));return r.isNumber(A)&&v()>A?true:false}}}else{u={get:r.noop,set:r.noop,remove:r.noop,clear:r.noop,isExpired:r.noop}}r.mixin(w.prototype,u);return w;function v(){return new Date().getTime()}function x(A){return JSON.stringify(r.isUndefined(A)?null:A)}function z(A){return JSON.parse(A)}}();var q=function(){var v=0,x={},t=6,w=new d(10);function A(B){B=B||{};this.cancelled=false;this.lastUrl=null;this._send=B.transport?y(B.transport):b.ajax;this._get=B.rateLimiter?B.rateLimiter(this._get):this._get;this._cache=B.cache===false?new d(0):w}A.setMaxPendingRequests=function u(B){t=B};A.resetCache=function z(){w.reset()};r.mixin(A.prototype,{_get:function(F,I,C){var H=this,G;if(this.cancelled||F!==this.lastUrl){return}if(G=x[F]){G.done(E).fail(D)}else{if(v<t){v++;x[F]=this._send(F,I).done(E).fail(D).always(B)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}}function E(J){C&&C(null,J);H._cache.set(F,J)}function D(){C&&C(true)}function B(){v--;delete x[F];if(H.onDeckRequestArgs){H._get.apply(H,H.onDeckRequestArgs);H.onDeckRequestArgs=null}}},get:function(C,E,B){var D;if(r.isFunction(E)){B=E;E={}}this.cancelled=false;this.lastUrl=C;if(D=this._cache.get(C)){r.defer(function(){B&&B(null,D)})}else{this._get(C,E,B)}return !!D},cancel:function(){this.cancelled=true}});return A;function y(B){return function C(E,H){var D=b.Deferred();B(E,H,G,F);return D;function G(I){r.defer(function(){D.resolve(I)})}function F(I){r.defer(function(){D.reject(I)})}}}}();var j=function(){function t(C){C=C||{};if(!C.datumTokenizer||!C.queryTokenizer){b.error("datumTokenizer and queryTokenizer are both required")}this.datumTokenizer=C.datumTokenizer;this.queryTokenizer=C.queryTokenizer;this.reset()}r.mixin(t.prototype,{bootstrap:function v(C){this.datums=C.datums;this.trie=C.trie},add:function(D){var C=this;D=r.isArray(D)?D:[D];r.each(D,function(E){var G,F;G=C.datums.push(E)-1;F=x(C.datumTokenizer(E));r.each(F,function(H){var K,J,I;K=C.trie;J=H.split("");while(I=J.shift()){K=K.children[I]||(K.children[I]=A());K.ids.push(G)}})})},get:function u(E){var C=this,F,D;F=x(this.queryTokenizer(E));r.each(F,function(G){var K,J,I,H;if(D&&D.length===0){return false}K=C.trie;J=G.split("");while(K&&(I=J.shift())){K=K.children[I]}if(K&&J.length===0){H=K.ids.slice(0);D=D?y(D,H):H}else{D=[];return false}});return D?r.map(w(D),function(G){return C.datums[G]}):[]},reset:function z(){this.datums=[];this.trie=A()},serialize:function B(){return{datums:this.datums,trie:this.trie}}});return t;function x(C){C=r.filter(C,function(D){return !!D});C=r.map(C,function(D){return D.toLowerCase()});return C}function A(){return{ids:[],children:{}}}function w(G){var D={},F=[];for(var E=0,C=G.length;E<C;E++){if(!D[G[E]]){D[G[E]]=true;F.push(G[E])}}return F}function y(H,F){var D=0,G=0,J=[];H=H.sort(I);F=F.sort(I);var E=H.length,C=F.length;while(D<E&&G<C){if(H[D]<F[G]){D++}else{if(H[D]>F[G]){G++}else{J.push(H[D]);D++;G++}}}return J;function I(L,K){return L-K}}}();var f=function(){return{local:v,prefetch:t,remote:u};function v(w){return w.local||null}function t(y){var x,w;w={url:null,thumbprint:"",ttl:24*60*60*1000,filter:null,ajax:{}};if(x=y.prefetch||null){x=r.isString(x)?{url:x}:x;x=r.mixin(w,x);x.thumbprint=m+x.thumbprint;x.ajax.type=x.ajax.type||"GET";x.ajax.dataType=x.ajax.dataType||"json";!x.url&&b.error("prefetch requires url to be set")}return x}function u(A){var y,z;z={url:null,cache:true,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}};if(y=A.remote||null){y=r.isString(y)?{url:y}:y;y=r.mixin(z,y);y.rateLimiter=/^throttle$/i.test(y.rateLimitBy)?x(y.rateLimitWait):w(y.rateLimitWait);y.ajax.type=y.ajax.type||"GET";y.ajax.dataType=y.ajax.dataType||"json";delete y.rateLimitBy;delete y.rateLimitWait;!y.url&&b.error("remote requires url to be set")}return y;function w(B){return function(C){return r.debounce(C,B)}}function x(B){return function(C){return r.throttle(C,B)}}}}();(function(E){var t,z;t=E.Bloodhound;z={data:"data",protocol:"protocol",thumbprint:"thumbprint"};E.Bloodhound=v;function v(M){if(!M||!M.local&&!M.prefetch&&!M.remote){b.error("one of local, prefetch, or remote is required")}this.limit=M.limit||5;this.sorter=C(M.sorter);this.dupDetector=M.dupDetector||B;this.local=f.local(M);this.prefetch=f.prefetch(M);this.remote=f.remote(M);this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null;this.index=new j({datumTokenizer:M.datumTokenizer,queryTokenizer:M.queryTokenizer});this.storage=this.cacheKey?new p(this.cacheKey):null}v.noConflict=function L(){E.Bloodhound=t;return v};v.tokenizers=o;r.mixin(v.prototype,{_loadPrefetch:function w(Q){var N=this,P,M;if(P=this._readFromStorage(Q.thumbprint)){this.index.bootstrap(P);M=b.Deferred().resolve()}else{M=b.ajax(Q.url,Q.ajax).done(O)}return M;function O(R){N.clear();N.add(Q.filter?Q.filter(R):R);N._saveToStorage(N.index.serialize(),Q.thumbprint,Q.ttl)}},_getFromRemote:function y(R,M){var Q=this,O,P;if(!this.transport){return}R=R||"";P=encodeURIComponent(R);O=this.remote.replace?this.remote.replace(this.remote.url,R):this.remote.url.replace(this.remote.wildcard,P);return this.transport.get(O,this.remote.ajax,N);function N(S,T){S?M([]):M(Q.remote.filter?Q.remote.filter(T):T)}},_cancelLastRemoteRequest:function K(){this.transport&&this.transport.cancel()},_saveToStorage:function F(O,N,M){if(this.storage){this.storage.set(z.data,O,M);this.storage.set(z.protocol,location.protocol,M);this.storage.set(z.thumbprint,N,M)}},_readFromStorage:function J(N){var M={},O;if(this.storage){M.data=this.storage.get(z.data);M.protocol=this.storage.get(z.protocol);M.thumbprint=this.storage.get(z.thumbprint)}O=M.thumbprint!==N||M.protocol!==location.protocol;return M.data&&!O?M.data:null},_initialize:function u(){var P=this,O=this.local,M;M=this.prefetch?this._loadPrefetch(this.prefetch):b.Deferred().resolve();O&&M.done(N);this.transport=this.remote?new q(this.remote):null;return this.initPromise=M.promise();function N(){P.add(r.isFunction(O)?O():O)}},initialize:function u(M){return !this.initPromise||M?this._initialize():this.initPromise},add:function A(M){this.index.add(M)},get:function H(Q,M){var O=this,P=[],N=false;P=this.index.get(Q);P=this.sorter(P).slice(0,this.limit);P.length<this.limit?N=this._getFromRemote(Q,R):this._cancelLastRemoteRequest();if(!N){(P.length>0||!this.transport)&&M&&M(P)}function R(T){var S=P.slice(0);r.each(T,function(V){var U;U=r.some(S,function(W){return O.dupDetector(V,W)});!U&&S.push(V);return S.length<O.limit});M&&M(O.sorter(S))}},clear:function D(){this.index.reset()},clearPrefetchCache:function x(){this.storage&&this.storage.clear()},clearRemoteCache:function G(){this.transport&&q.resetCache()},ttAdapter:function I(){return r.bind(this.get,this)}});return v;function C(N){return r.isFunction(N)?M:O;function M(P){return P.sort(N)}function O(P){return P}}function B(){return false}})(this);var h=function(){return{wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'}}();var g=function(){var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};if(r.isMsie()){r.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"})}if(r.isMsie()&&r.isMsie()<=7){r.mixin(t.input,{marginTop:"-1px"})}return t}();var a=function(){var u="typeahead:";function t(v){if(!v||!v.el){b.error("EventBus initialized without el")}this.$el=b(v.el)}r.mixin(t.prototype,{trigger:function(w){var v=[].slice.call(arguments,1);this.$el.trigger(u+w,v)}});return t}();var e=function(){var v=/\s+/,z=t();return{onSync:A,onAsync:u,off:w,trigger:x};function B(H,F,D,E){var G;if(!D){return this}F=F.split(v);D=E?C(D,E):D;this._callbacks=this._callbacks||{};while(G=F.shift()){this._callbacks[G]=this._callbacks[G]||{sync:[],async:[]};this._callbacks[G][H].push(D)}return this}function u(F,D,E){return B.call(this,"async",F,D,E)}function A(F,D,E){return B.call(this,"sync",F,D,E)}function w(D){var E;if(!this._callbacks){return this}D=D.split(v);while(E=D.shift()){delete this._callbacks[E]}return this}function x(E){var F,G,D,H,I;if(!this._callbacks){return this}E=E.split(v);D=[].slice.call(arguments,1);while((F=E.shift())&&(G=this._callbacks[F])){H=y(G.sync,this,[F].concat(D));I=y(G.async,this,[F].concat(D));H()&&z(I)}return this}function y(G,F,E){return D;function D(){var J;for(var I=0,H=G.length;!J&&I<H;I+=1){J=G[I].apply(F,E)===false}return !J}}function t(){var E;if(window.setImmediate){E=function F(G){setImmediate(function(){G()})}}else{E=function D(G){setTimeout(function(){G()},0)}}return E}function C(E,D){return E.bind?E.bind(D):function(){E.apply(D,[].slice.call(arguments,0))}}}();var c=function(w){var v={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:false,caseSensitive:false};return function u(A){var x;A=r.mixin({},v,A);if(!A.node||!A.pattern){return}A.pattern=r.isArray(A.pattern)?A.pattern:[A.pattern];x=t(A.pattern,A.caseSensitive,A.wordsOnly);y(A.node,z);function z(E){var C,B,D;if(C=x.exec(E.data)){D=w.createElement(A.tagName);A.className&&(D.className=A.className);B=E.splitText(C.index);B.splitText(C[0].length);D.appendChild(B.cloneNode(true));E.parentNode.replaceChild(D,B)}return !!C}function y(E,F){var C,D=3;for(var B=0;B<E.childNodes.length;B++){C=E.childNodes[B];if(C.nodeType===D){B+=F(C)?1:0}else{y(C,F)}}}};function t(A,y,D){var C=[],B;for(var z=0,x=A.length;z<x;z++){C.push(r.escapeRegExChars(A[z]))}B=D?"\\b("+C.join("|")+")\\b":"("+C.join("|")+")";return y?new RegExp(B):new RegExp(B,"i")}}(window.document);var l=function(){var P;P={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};function M(Y){var W=this,X,T,V,U;Y=Y||{};if(!Y.input){b.error("input is missing")}X=r.bind(this._onBlur,this);T=r.bind(this._onFocus,this);V=r.bind(this._onKeydown,this);U=r.bind(this._onInput,this);this.$hint=b(Y.hint);this.$input=b(Y.input).on("blur.tt",X).on("focus.tt",T).on("keydown.tt",V);if(this.$hint.length===0){this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=r.noop}if(!r.isMsie()){this.$input.on("input.tt",U)}else{this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(Z){if(P[Z.which||Z.keyCode]){return}r.defer(r.bind(W._onInput,W,Z))})}this.query=this.$input.val();this.$overflowHelper=F(this.$input)}M.normalizeQuery=function(T){return(T||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")};r.mixin(M.prototype,e,{_onBlur:function D(){this.resetInputValue();this.trigger("blurred")},_onFocus:function x(){this.trigger("focused")},_onKeydown:function R(T){var U=P[T.which||T.keyCode];this._managePreventDefault(U,T);if(U&&this._shouldTrigger(U,T)){this.trigger(U+"Keyed",T)}},_onInput:function u(){this._checkInputValue()},_managePreventDefault:function z(X,W){var V,U,T;switch(X){case"tab":U=this.getHint();T=this.getInputValue();V=U&&U!==T&&!G(W);break;case"up":case"down":V=!G(W);break;default:V=false}V&&W.preventDefault()},_shouldTrigger:function S(V,U){var T;switch(V){case"tab":T=!G(U);break;default:T=true}return T},_checkInputValue:function A(){var T,U,V;T=this.getInputValue();U=C(T,this.query);V=U?this.query.length!==T.length:false;this.query=T;if(!U){this.trigger("queryChanged",this.query)}else{if(V){this.trigger("whitespaceChanged",this.query)}}},focus:function I(){this.$input.focus()},blur:function N(){this.$input.blur()},getQuery:function K(){return this.query},setQuery:function J(T){this.query=T},getInputValue:function y(){return this.$input.val()},setInputValue:function B(U,T){this.$input.val(U);T?this.clearHint():this._checkInputValue()},resetInputValue:function w(){this.setInputValue(this.query,true)},getHint:function v(){return this.$hint.val()},setHint:function O(T){this.$hint.val(T)},clearHint:function E(){this.setHint("")},clearHintIfInvalid:function t(){var W,V,T,U;W=this.getInputValue();V=this.getHint();T=W!==V&&V.indexOf(W)===0;U=W!==""&&T&&!this.hasOverflow();!U&&this.clearHint()},getLanguageDirection:function H(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function L(){var T=this.$input.width()-2;this.$overflowHelper.text(this.getInputValue());return this.$overflowHelper.width()>=T},isCursorAtEnd:function(){var U,V,T;U=this.$input.val().length;V=this.$input[0].selectionStart;if(r.isNumber(V)){return V===U}else{if(document.selection){T=document.selection.createRange();T.moveStart("character",-U);return U===T.text.length}}return true},destroy:function Q(){this.$hint.off(".tt");this.$input.off(".tt");this.$hint=this.$input=this.$overflowHelper=null}});return M;function F(T){return b('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:T.css("font-family"),fontSize:T.css("font-size"),fontStyle:T.css("font-style"),fontVariant:T.css("font-variant"),fontWeight:T.css("font-weight"),wordSpacing:T.css("word-spacing"),letterSpacing:T.css("letter-spacing"),textIndent:T.css("text-indent"),textRendering:T.css("text-rendering"),textTransform:T.css("text-transform")}).insertAfter(T)}function C(U,T){return M.normalizeQuery(U)===M.normalizeQuery(T)}function G(T){return T.altKey||T.ctrlKey||T.metaKey||T.shiftKey}}();var s=function(){var u="ttDataset",I="ttValue",C="ttDatum";function t(J){J=J||{};J.templates=J.templates||{};if(!J.source){b.error("missing source")}if(J.name&&!w(J.name)){b.error("invalid dataset name: "+J.name)}this.query=null;this.highlight=!!J.highlight;this.name=J.name||r.getUniqueId();this.source=J.source;this.displayFn=x(J.display||J.displayKey);this.templates=y(J.templates,this.displayFn);this.$el=b(h.dataset.replace("%CLASS%",this.name))}t.extractDatasetName=function G(J){return b(J).data(u)};t.extractValue=function D(J){return b(J).data(I)};t.extractDatum=function D(J){return b(J).data(C)};r.mixin(t.prototype,e,{_render:function v(P,J){if(!this.$el){return}var O=this,L;this.$el.empty();L=J&&J.length;if(!L&&this.templates.empty){this.$el.html(K()).prepend(O.templates.header?N():null).append(O.templates.footer?M():null)}else{if(L){this.$el.html(Q()).prepend(O.templates.header?N():null).append(O.templates.footer?M():null)}}this.trigger("rendered");function K(){return O.templates.empty({query:P,isEmpty:true})}function Q(){var S,R;S=b(h.suggestions).css(g.suggestions);R=r.map(J,T);S.append.apply(S,R);O.highlight&&c({className:"tt-highlight",node:S[0],pattern:P});return S;function T(U){var V;V=b(h.suggestion).append(O.templates.suggestion(U)).data(u,O.name).data(I,O.displayFn(U)).data(C,U);V.children().each(function(){b(this).css(g.suggestionChild)});return V}}function N(){return O.templates.header({query:P,isEmpty:!L})}function M(){return O.templates.footer({query:P,isEmpty:!L})}},getRoot:function E(){return this.$el},update:function z(L){var K=this;this.query=L;this.canceled=false;this.source(L,J);function J(M){if(!K.canceled&&L===K.query){K._render(L,M)}}},cancel:function H(){this.canceled=true},clear:function B(){this.cancel();this.$el.empty();this.trigger("rendered")},isEmpty:function A(){return this.$el.is(":empty")},destroy:function F(){this.$el=null}});return t;function x(J){J=J||"value";return r.isFunction(J)?J:K;function K(L){return L[J]}}function y(K,L){return{empty:K.empty&&r.templatify(K.empty),header:K.header&&r.templatify(K.header),footer:K.footer&&r.templatify(K.footer),suggestion:K.suggestion||J};function J(M){return"<p>"+L(M)+"</p>"}}function w(J){return/^[_a-zA-Z0-9-]+$/.test(J)}}();var n=function(){function M(V){var T=this,R,U,S;V=V||{};if(!V.menu){b.error("menu is required")}this.isOpen=false;this.isEmpty=true;this.datasets=r.map(V.datasets,D);R=r.bind(this._onSuggestionClick,this);U=r.bind(this._onSuggestionMouseEnter,this);S=r.bind(this._onSuggestionMouseLeave,this);this.$menu=b(V.menu).on("click.tt",".tt-suggestion",R).on("mouseenter.tt",".tt-suggestion",U).on("mouseleave.tt",".tt-suggestion",S);r.each(this.datasets,function(W){T.$menu.append(W.getRoot());W.onSync("rendered",T._onRendered,T)})}r.mixin(M.prototype,e,{_onSuggestionClick:function L(R){this.trigger("suggestionClicked",b(R.currentTarget))},_onSuggestionMouseEnter:function t(R){this._removeCursor();this._setCursor(b(R.currentTarget),true)},_onSuggestionMouseLeave:function G(){this._removeCursor()},_onRendered:function z(){this.isEmpty=r.every(this.datasets,R);this.isEmpty?this._hide():this.isOpen&&this._show();this.trigger("datasetRendered");function R(S){return S.isEmpty()}},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function y(){return this.$menu.find(".tt-suggestion")},_getCursor:function w(){return this.$menu.find(".tt-cursor").first()},_setCursor:function O(S,R){S.first().addClass("tt-cursor");!R&&this.trigger("cursorMoved")},_removeCursor:function v(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function u(R){var T,S,V,U;if(!this.isOpen){return}S=this._getCursor();T=this._getSuggestions();this._removeCursor();V=T.index(S)+R;V=(V+1)%(T.length+1)-1;if(V===-1){this.trigger("cursorRemoved");return}else{if(V<-1){V=T.length-1}}this._setCursor(U=T.eq(V));this._ensureVisible(U)},_ensureVisible:function K(U){var R,T,S,V;R=U.position().top;T=R+U.outerHeight(true);S=this.$menu.scrollTop();V=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10);if(R<0){this.$menu.scrollTop(S+R)}else{if(V<T){this.$menu.scrollTop(S+(T-V))}}},close:function H(){if(this.isOpen){this.isOpen=false;this._removeCursor();this._hide();this.trigger("closed")}},open:function F(){if(!this.isOpen){this.isOpen=true;!this.isEmpty&&this._show();this.trigger("opened")}},setLanguageDirection:function P(R){this.$menu.css(R==="ltr"?g.ltr:g.rtl)},moveCursorUp:function A(){this._moveCursor(-1)},moveCursorDown:function Q(){this._moveCursor(+1)},getDatumForSuggestion:function C(S){var R=null;if(S.length){R={raw:s.extractDatum(S),value:s.extractValue(S),datasetName:s.extractDatasetName(S)}}return R},getDatumForCursor:function x(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function J(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function B(R){r.each(this.datasets,S);function S(T){T.update(R)}},empty:function E(){r.each(this.datasets,R);this.isEmpty=true;function R(S){S.clear()}},isVisible:function I(){return this.isOpen&&!this.isEmpty},destroy:function N(){this.$menu.off(".tt");this.$menu=null;r.each(this.datasets,R);function R(S){S.destroy()}}});return M;function D(R){return new s(R)}}();var k=function(){var U="ttAttrs";function E(aa){var Z,ab,Y;aa=aa||{};if(!aa.input){b.error("missing input")}this.isActivated=false;this.autoselect=!!aa.autoselect;this.minLength=r.isNumber(aa.minLength)?aa.minLength:1;this.$node=O(aa.input,aa.withHint);Z=this.$node.find(".tt-dropdown-menu");ab=this.$node.find(".tt-input");Y=this.$node.find(".tt-hint");ab.on("blur.tt",function(ad){var af,ae,ac;af=document.activeElement;ae=Z.is(af);ac=Z.has(af).length>0;if(r.isMsie()&&(ae||ac)){ad.preventDefault();ad.stopImmediatePropagation();r.defer(function(){ab.focus()})}});Z.on("mousedown.tt",function(ac){ac.preventDefault()});this.eventBus=aa.eventBus||new a({el:ab});this.dropdown=new n({menu:Z,datasets:aa.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this);this.input=new l({input:ab,hint:Y}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this);this._setLanguageDirection()}r.mixin(E.prototype,{_onSuggestionClicked:function v(aa,Z){var Y;if(Y=this.dropdown.getDatumForSuggestion(Z)){this._select(Y)}},_onCursorMoved:function P(){var Y=this.dropdown.getDatumForCursor();this.input.setInputValue(Y.value,true);this.eventBus.trigger("cursorchanged",Y.raw,Y.datasetName)},_onCursorRemoved:function y(){this.input.resetInputValue();this._updateHint()},_onDatasetRendered:function K(){this._updateHint()},_onOpened:function w(){this._updateHint();this.eventBus.trigger("opened")},_onClosed:function B(){this.input.clearHint();this.eventBus.trigger("closed")},_onFocused:function M(){this.isActivated=true;this.dropdown.open()},_onBlurred:function N(){this.isActivated=false;this.dropdown.empty();this.dropdown.close()},_onEnterKeyed:function I(Z,Y){var aa,ab;aa=this.dropdown.getDatumForCursor();ab=this.dropdown.getDatumForTopSuggestion();if(aa){this._select(aa);Y.preventDefault()}else{if(this.autoselect&&ab){this._select(ab);Y.preventDefault()}}},_onTabKeyed:function X(aa,Z){var Y;if(Y=this.dropdown.getDatumForCursor()){this._select(Y);Z.preventDefault()}else{this._autocomplete(true)}},_onEscKeyed:function S(){this.dropdown.close();this.input.resetInputValue()},_onUpKeyed:function u(){var Y=this.input.getQuery();this.dropdown.isEmpty&&Y.length>=this.minLength?this.dropdown.update(Y):this.dropdown.moveCursorUp();this.dropdown.open()},_onDownKeyed:function z(){var Y=this.input.getQuery();this.dropdown.isEmpty&&Y.length>=this.minLength?this.dropdown.update(Y):this.dropdown.moveCursorDown();this.dropdown.open()},_onLeftKeyed:function W(){this.dir==="rtl"&&this._autocomplete()},_onRightKeyed:function J(){this.dir==="ltr"&&this._autocomplete()},_onQueryChanged:function G(Z,Y){this.input.clearHintIfInvalid();Y.length>=this.minLength?this.dropdown.update(Y):this.dropdown.empty();this.dropdown.open();this._setLanguageDirection()},_onWhitespaceChanged:function T(){this._updateHint();this.dropdown.open()},_setLanguageDirection:function R(){var Y;if(this.dir!==(Y=this.input.getLanguageDirection())){this.dir=Y;this.$node.css("direction",Y);this.dropdown.setLanguageDirection(Y)}},_updateHint:function L(){var Z,ad,ac,ab,Y,aa;Z=this.dropdown.getDatumForTopSuggestion();if(Z&&this.dropdown.isVisible()&&!this.input.hasOverflow()){ad=this.input.getInputValue();ac=l.normalizeQuery(ad);ab=r.escapeRegExChars(ac);Y=new RegExp("^(?:"+ab+")(.+$)","i");aa=Y.exec(Z.value);aa?this.input.setHint(ad+aa[1]):this.input.clearHint()}else{this.input.clearHint()}},_autocomplete:function V(aa){var ac,ab,Y,Z;ac=this.input.getHint();ab=this.input.getQuery();Y=aa||this.input.isCursorAtEnd();if(ac&&ab!==ac&&Y){Z=this.dropdown.getDatumForTopSuggestion();Z&&this.input.setInputValue(Z.value);this.eventBus.trigger("autocompleted",Z.raw,Z.datasetName)}},_select:function H(Y){this.input.setQuery(Y.value);this.input.setInputValue(Y.value,true);this._setLanguageDirection();this.eventBus.trigger("selected",Y.raw,Y.datasetName);this.dropdown.close();r.defer(r.bind(this.dropdown.empty,this.dropdown))},open:function D(){this.dropdown.open()},close:function F(){this.dropdown.close()},setVal:function t(Y){Y=r.toStr(Y);if(this.isActivated){this.input.setInputValue(Y)}else{this.input.setQuery(Y);this.input.setInputValue(Y,true)}this._setLanguageDirection()},getVal:function C(){return this.input.getQuery()},destroy:function Q(){this.input.destroy();this.dropdown.destroy();x(this.$node);this.$node=null}});return E;function O(Y,ad){var ae,aa,ac,Z;ae=b(Y);aa=b(h.wrapper).css(g.wrapper);ac=b(h.dropdown).css(g.dropdown);Z=ae.clone().css(g.hint).css(A(ae));Z.val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",true).attr({autocomplete:"off",spellcheck:"false",tabindex:-1});ae.data(U,{dir:ae.attr("dir"),autocomplete:ae.attr("autocomplete"),spellcheck:ae.attr("spellcheck"),style:ae.attr("style")});ae.addClass("tt-input").attr({autocomplete:"off",spellcheck:false}).css(ad?g.input:g.inputWithNoHint);try{!ae.attr("dir")&&ae.attr("dir","auto")}catch(ab){}return ae.wrap(aa).parent().prepend(ad?Z:null).append(ac)}function A(Y){return{backgroundAttachment:Y.css("background-attachment"),backgroundClip:Y.css("background-clip"),backgroundColor:Y.css("background-color"),backgroundImage:Y.css("background-image"),backgroundOrigin:Y.css("background-origin"),backgroundPosition:Y.css("background-position"),backgroundRepeat:Y.css("background-repeat"),backgroundSize:Y.css("background-size")}}function x(Y){var Z=Y.find(".tt-input");r.each(Z.data(U),function(ab,aa){r.isUndefined(ab)?Z.removeAttr(aa):Z.attr(aa,ab)});Z.detach().removeData(U).removeClass("tt-input").insertAfter(Y);Y.remove()}}();(function(){var v,t,w;v=b.fn.typeahead;t="ttTypeahead";w={initialize:function x(E,D){D=r.isArray(D)?D:[].slice.call(arguments,1);E=E||{};return this.each(C);function C(){var H=b(this),F,G;r.each(D,function(I){I.highlight=!!E.highlight});G=new k({input:H,eventBus:F=new a({el:H}),withHint:r.isUndefined(E.hint)?true:!!E.hint,minLength:E.minLength,autoselect:E.autoselect,datasets:D});H.data(t,G)}},open:function y(){return this.each(C);function C(){var E=b(this),D;if(D=E.data(t)){D.open()}}},close:function B(){return this.each(C);function C(){var E=b(this),D;if(D=E.data(t)){D.close()}}},val:function u(C){return !arguments.length?E(this.first()):this.each(D);function D(){var G=b(this),F;if(F=G.data(t)){F.setVal(C)}}function E(H){var G,F;if(G=H.data(t)){F=G.getVal()}return F}},destroy:function A(){return this.each(C);function C(){var E=b(this),D;if(D=E.data(t)){D.destroy();E.removeData(t)}}}};b.fn.typeahead=function(D){var C;if(w[D]&&D!=="initialize"){C=this.filter(function(){return !!b(this).data(t)});return w[D].apply(C,[].slice.call(arguments,1))}else{return w.initialize.apply(this,arguments)}};b.fn.typeahead.noConflict=function z(){b.fn.typeahead=v;return this}})()})(window.jQuery);(function(){window.Bennu=window.Bennu||{};$(function(){Bennu.loaded=true});if(window.BennuPortal){$.extend(window.Bennu,window.BennuPortal)}Bennu.version="1.0.0";Bennu.toString=function(){return"Bennu Toolkit v"+Bennu.version};Bennu.gensym=function(){var e="";var c="abcdefghijklmnopqrstuvwxyz0123456789";for(var d=0;d<5;d++){e+=c.charAt(Math.floor(Math.random()*c.length))}return e};Bennu.contextPath=window.contextPath;if(!Bennu.contextPath){$("script").map(function(c,d){var e=d.getAttribute("src");if(e&&e.indexOf("/bennu-toolkit/js/toolkit.js")!=-1){Bennu.contextPath=e.substring(0,e.indexOf("/bennu-toolkit/js/toolkit.js"))}})}Bennu.contextPath=Bennu.contextPath||"";function a(c){c[0]=c[0].split(" ").map(function(d){return"bennu-toolkit-"+d}).reduce(function(d,e){return d+" "+e})}Bennu.on=function(){a(arguments);var c=$("html");c.on.apply(c,arguments)};Bennu.off=function(){a(arguments);var c=$("html");c.off.apply(c,arguments)};Bennu.trigger=function(){a(arguments);var c=$("html");c.trigger.apply(c,arguments)};Bennu.widgetHandler=Bennu.widgetHandler||{};Bennu.widgetHandler.makeFor=function(g,f){var d=[];var c={get:function(){return $(g).val()},set:function(e){$(g).val(e);$(g).trigger("change")},clear:function(e){this.set("")},onchange:function(e){d.push(e)},trigger:function(){for(var e=0;e<d.length;e++){d[e].apply(g,{type:"change",target:g})}},remove:function(){$(g).data("input").remove();$(g).data("input",null);$(g).data("handler",null);$(g).off(".bennu")}};$(g).data("handler",c);return c};var b=function(){if(Bennu.loaded){Bennu.trigger("load")}else{$(function(){Bennu.trigger("load")})}};if(Bennu.locales){b()}else{$.ajax({type:"GET",url:Bennu.contextPath+"/api/bennu-portal/data",async:false,dataType:"json",success:function(c,d,e){Bennu.username=c.username;Bennu.locales=c.locales;Bennu.locale=c.locale;Bennu.groups=c.groups;Bennu.lang=(function(f){if(f.indexOf("-")!=-1){return f.split("-")[0]}return f})(c.locale.tag);b()},error:function(e,c,d){Bennu.username=null;Bennu.locales=[{displayName:"English (United Kingdom)",lang:"en",tag:"en-GB"}];Bennu.locale={displayName:"English (United Kingdom)",lang:"en",tag:"en-GB"};Bennu.groups=null;Bennu.lang="en";b()}})}}).call(this);(function(){var a=false;Bennu.validation={};Bennu.validation.attachToForm=function(c){var b=c.closest("form");if(!b.data("bennu-validator")){b.on("submit",function(d){try{var g=$("[bennu-localized-string],[bennu-html-editor]",b).map(function(e,h){h=$(h);h.data("input").removeClass("has-error");return Bennu.validation.validateInput(h)});if(!Array.prototype.reduce.apply(g,[function(e,h){return e&&h},true])){d.preventDefault();return false}}catch(f){console.error(f.stack);return a}});b.data("bennu-validator",true)}};Bennu.validation.validateInput=function(d){var b=d.val()?JSON.parse(d.val()):null;if(d.attr("required")!=null||d.attr("required")!=undefined){var c=Bennu.locales.map(function(e){return Bennu.localizedString.getContent(b,e,true)||false}).reduce(function(e,f){return e&&f},true);if(!c){d.data("input").addClass("has-error");$(".help-block",d.data("input")).html("You need to to insert text in all languages")}return c}else{if(d.attr("required-any")!=null||d.attr("required-any")!=undefined){var c=Bennu.locales.map(function(e){return Bennu.localizedString.getContent(b,e,true)||false}).reduce(function(e,f){return e||f},false);if(!c){d.data("input").addClass("has-error");$(".help-block",d.data("input")).html("You need to to insert text in at least one language")}return c}}}})();(function(){Bennu.localizedString=Bennu.localizedString||{};Bennu.localizedString.attr="bennu-localized-string";function a(c){return c.tag.split("-")[0].toUpperCase()}Bennu.localizedString.changeData=function(d,j,f,g,e){g=$(g);var h=$(g.data("related")).val();if(h===""){$(g.data("related")).val("{}");h="{}"}var h=JSON.parse(h);var c=d.tag;if(!(c in h)){singleTag=a(d).toLowerCase();if(singleTag in h){c=singleTag}}h=h[c];if(h!==f.val()){f.val(h||"");j.html(d.displayName||a(d));if(e&&e.length){e.html(a(d))}j.data("locale",d);g.data("locale",d)}};Bennu.localizedString.updateValueForLanguage=function(f,e,j){var h=JSON.parse($(j.data("related")).val());var d=e.data("locale");var c=d.tag;if(!(c in h)){var g=a(d).toLowerCase();if(g in h){c=g}}h[c]=f.val();$(j.data("related")).val(JSON.stringify(h));$(j.data("related")).trigger("change")};Bennu.localizedString.makeLocaleList=function(g,f,h){for(var e=0;e<Bennu.locales.length;e++){var c=Bennu.locales[e];var d=$("<li><a href='#' onclick='return false;' >"+(c.displayName||c.tag)+"</a>");d.data("locale",c);d.on("click",h);g.append(d)}};Bennu.localizedString.getContent=function(e,d,f){if(!e||typeof e==="string"){return e}if(d&&typeof d!=="string"){var c=d.tag}else{if(!d){var c=Bennu.locale.tag}else{var c=d}}if(c in e){return e[c]}c=c.split("-")[0];if(c in e){return e[c]}for(var g in e){if(g.indexOf(c)===0){return e[g]}}return f?null:e[Object.keys(e)[0]]};Bennu.localizedString.createWidget=function(e){e=$(e);var c=e.attr("bennu-html-editor");if(c!==null&&c!==undefined){return}if(!$(e).data("input")){if(e.prop("tagName")=="INPUT"){var h=$('<div class="bennu-localized-string-input-group" ><div class="input-group"><input type="text" class="form-control bennu-localized-string-input"><div class="input-group-btn bennu-localized-string-group"><button type="button" class=" btn btn-default dropdown-toggle bennu-localized-string-button-full bennu-localized-string-button" data-toggle="dropdown"><span class="bennu-localized-string-language"></span> <span class="caret"></span></button><button type="button" class=" btn btn-default dropdown-toggle bennu-localized-string-button-short bennu-localized-string-button" data-toggle="dropdown"><span class="bennu-localized-string-tag"></span> <span class="caret"></span></button></button><ul class="dropdown-menu bennu-localized-string-menu pull-right" role="menu"></ul></div></div><p class="help-block"></p></div>')}else{if(e.prop("tagName")=="TEXTAREA"){var h=$('<div class="bennu-localized-string-textArea"><p><div class="btn-group bennu-localized-string-group"><button type="button" class="btn btn-default dropdown-toggle bennu-localized-string-button" data-toggle="dropdown"><span class="bennu-localized-string-language"></span><span class="caret"></span></button><ul class="dropdown-menu bennu-localized-string-menu" role="menu"></ul></div></p><p><textarea class="form-control bennu-localized-string-textarea"></textarea><p class="help-block"></p></div>')}}h.data("related",e);Bennu.localizedString.makeLocaleList($(".bennu-localized-string-menu",h),h,function(k){Bennu.localizedString.changeData($(k.target).parent().data("locale"),$(".bennu-localized-string-language",h),$(".bennu-localized-string-input,.bennu-localized-string-textarea",h),h,$(".bennu-localized-string-tag",h))});Bennu.localizedString.changeData(Bennu.locale,$(".bennu-localized-string-language",h),$(".bennu-localized-string-input,.bennu-localized-string-textarea",h),h,$(".bennu-localized-string-tag",h));$(".bennu-localized-string-input,.bennu-localized-string-textarea",h).on("input propertychange",function(){Bennu.localizedString.updateValueForLanguage($(".bennu-localized-string-input,.bennu-localized-string-textarea",h),$(".bennu-localized-string-language",h),h);$(".help-block",h).empty();h.removeClass("has-error")});function f(){var k=j($(h).data("locale"))+1;if(k==Bennu.locales.length){k=0}return Bennu.locales[k]}function g(){var k=j($(h).data("locale"))-1;if(k<0){k=Bennu.locales.length-1}return Bennu.locales[k]}function j(l){var k=-1;$.map(Bennu.locales,function(n,m){if(n.tag==l.tag){k=m}});return k}var d=false;h.keydown(function(l){if(l.keyCode==18){d=true}else{if(d){var k;if(l.keyCode==40){k=f()}else{if(l.keyCode==38){k=g()}}if(k){Bennu.localizedString.changeData(k,$(".bennu-localized-string-language",h),$(".bennu-localized-string-input,.bennu-localized-string-textarea",h),h,$(".bennu-localized-string-tag",h))}}}});h.keyup(function(k){if(k.keyCode==18){d=false}});e.data("input",h);e.on("change.bennu",function(k){Bennu.localizedString.changeData(h.data("locale"),$(".bennu-localized-string-language",h),$(".bennu-localized-string-input,.bennu-localized-string-textarea",h),h,$(".bennu-localized-string-tag",h));e.data("handler").trigger()});e.after(h);Bennu.validation.attachToForm(h);b(h);return Bennu.widgetHandler.makeFor(e)}};function b(c){c=c||$(".bennu-localized-string-input-group");c.map(function(f,g){g=$(g);var h=$(".bennu-localized-string-button-full",g);var d=$(".bennu-localized-string-button-short",g);if(d.length&&h.length){if((h.width()/g.width())>1/3){if(h[0].style.display!=="none"){d[0].style.display="inline";h[0].style.display="none"}}else{if(d[0].style.display!=="none"){h[0].style.display="inline";d[0].style.display="none"}}}})}$(window).resize(function(){b()})})();(function(){var f=false;var h=true;Bennu.htmlEditor=Bennu.htmlEditor||{};Bennu.htmlEditor.attr="bennu-html-editor";Bennu.htmlEditor.colors=[["#000000","#424242","#636363","#9C9C94","#CEC6CE","#EFEFEF","#F7F7F7","#FFFFFF"],["#FF0000","#FF9C00","#FFFF00","#00FF00","#00FFFF","#0000FF","#9C00FF","#FF00FF"],["#F7C6CE","#FFE7CE","#FFEFC6","#D6EFD6","#CEDEE7","#CEE7F7","#D6D6E7","#E7D6DE"],["#E79C9C","#FFC69C","#FFE79C","#B5D6A5","#A5C6CE","#9CC6EF","#B5A5D6","#D6A5BD"],["#E76363","#F7AD6B","#FFD663","#94BD7B","#73A5AD","#6BADDE","#8C7BC6","#C67BA5"],["#CE0000","#E79439","#EFC631","#6BA54A","#4A7B8C","#3984C6","#634AA5","#A54A7B"],["#9C0000","#B56308","#BD9400","#397B21","#104A5A","#085294","#311873","#731842"],["#630000","#7B3900","#846300","#295218","#083139","#003163","#21104A","#4A1031"]];Bennu.htmlEditor.saveSelection=function(){if(window.getSelection){sel=window.getSelection();if(sel.getRangeAt&&sel.rangeCount){return sel.getRangeAt(0)}}else{if(document.selection&&document.selection.createRange){return document.selection.createRange()}}return null};Bennu.htmlEditor.restoreSelection=function(j){if(j){if(window.getSelection){sel=window.getSelection();sel.removeAllRanges();sel.addRange(j)}else{if(document.selection&&j.select){j.select()}}}};function c(r){var k="";for(var q=0;q<Bennu.htmlEditor.colors.length;q++){var n=Bennu.htmlEditor.colors[q];var m='<div class="note-color-row">';for(var p=0;p<n.length;p++){var o=n[p];m+='<button type="button" class="note-color-btn" style="background-color:'+o+';" data-event="'+r+'" data-value="'+o+'" title="" data-toggle="button" tabindex="-1" data-original-title="'+o+'"></button>'}m+="</div>";k+=m}return k}Bennu.htmlEditor.fullscreen=function(n){var m=$(n.target);var j=m.closest(".bennu-html-editor-input");j.toggleFullScreen();j.addClass("fullscreen");$(".fullscreen-button",j).addClass("btn-primary");$(document).bind("fullscreenchange",function(){var o=($(document).fullScreen()?"on":"off");if(o=="off"){$(".fullscreen").removeClass("fullscreen");$(".fullscreen-button",j).removeClass("btn-primary");$(".bennu-html-editor-tools",j).off("mouseover mouseout");$(".switch-to-code",j).parent().show();j.removeClass("visible")}else{$(".switch-to-code",j).parent().hide()}});var k;function l(o){clearTimeout(k),j.hasClass("visible")&&"show"!==o?"autohide"!==o&&j.removeClass("visible"):j.addClass("visible"),"autohide"===o&&(k=setTimeout(function(){j.removeClass("visible")},2000))}$(".bennu-html-editor-tools",j).on("mouseover",function(){l("show")}).on("mouseout",function(){l("autohide")});l("show");k=setTimeout(function(){j.removeClass("visible")},2000);$(".bennu-html-editor-editor",j).focus()};var g=/\n\n/g;var a=/\n/g;function e(j){return j.replace(g,"<p></p>").replace(a,"<br>")}var d=/\S/;function b(j){return j.replace(d,function(k){return k.toUpperCase()})}Bennu.htmlEditor.createWidget=function(x){x=$(x);var w=$('<div class="bennu-html-editor-input"><div class="bennu-html-editor-tools"><div class="bennu-html-editor-toolbar btn-toolbar" data-role="editor-toolbar" data-target=".bennu-html-editor-editor"></div></div><div class="bennu-html-editor-editor editor-input" contenteditable="true"></div><span class="help-block"></span></div>');var A=x.attr("toolbar");if(A===""||A===undefined||A===null){A="size,style,lists,align,links,table,image,undo,fullscreen,source"}$();A=A.split(",");for(var v=0;v<A.length;v++){var z=A[v];if(z==="size"){$(".btn-toolbar",w).append('<div class="btn-group"><a class="btn btn-sm btn-default dropdown-toggle" data-toggle="dropdown" title="" data-original-title="Style"><span class="fa fa-header"></span>&nbsp;<b class="caret"></b></a><ul class="dropdown-menu"><li><a data-edit="formatBlock p" href="#" data-value="">Normal</a></li><li><a data-edit="formatBlock blockquote" href="#" data-value="">Quote</a></li><li><a data-edit="formatBlock pre" href="#">Code</a></li><li><a data-edit="formatBlock h1" href="#">Header 1</a></li><li><a data-edit="formatBlock h2" href="#">Header 2</a></li><li><a data-edit="formatBlock h3" href="#">Header 3</a></li><li><a data-edit="formatBlock h4" href="#">Header 4</a></li><li><a data-edit="formatBlock h5" href="#">Header 5</a></li><li><a data-edit="formatBlock h6" href="#">Header 6</a></li></ul></div>')}else{if(z==="style"){$(".btn-toolbar",w).append('<div class="btn-group"><a class="btn btn-sm btn-default" data-edit="bold" title="" data-original-title="Bold (Ctrl/Cmd+B)"><span class="glyphicon glyphicon-bold"></span></a><a class="btn btn-sm btn-default" data-edit="italic" title="" data-original-title="Italic (Ctrl/Cmd+I)"><span class="glyphicon glyphicon-italic"></span></a><a class="btn btn-sm btn-default" data-edit="strikethrough" title="" data-original-title="Strikethrough"><span class="fa fa-strikethrough"></span></a><a class="btn btn-sm btn-default" data-edit="underline" title="" data-original-title="Underline (Ctrl/Cmd+U)"><span class="fa fa-underline"></span></a><a class="btn btn-sm btn-default" data-edit="superscript" title="" data-original-title="Superscript"><i class="fa fa-superscript icon-superscript"></i></a><a class="btn btn-sm btn-default" data-edit="subscript" title="" data-original-title="Subscript"><i class="fa fa-subscript icon-subscript"></i></a><a class="btn btn-sm btn-default" data-edit="removeFormat" title="" data-original-title="Remove Font Style"><i class="fa fa-eraser"></i></a></div>')}else{if(z==="lists"){$(".btn-toolbar",w).append('<div class="btn-group"><a class="btn btn-sm btn-default" data-edit="insertunorderedlist" title="" data-original-title="Bullet list"><span class="fa fa-list-ul"></span></a><a class="btn btn-sm btn-default" data-edit="insertorderedlist" title="" data-original-title="Number list"><span class="fa fa-list-ol"></span></a></div>')}else{if(z==="align"){$(".btn-toolbar",w).append('<div class="btn-group"><a class="btn btn-sm btn-default dropdown-toggle" data-toggle="dropdown" title="" data-original-title="Paragraph"><span class="fa fa-align-left"></span>&nbsp;<b class="caret"></b></a><ul class="dropdown-menu menu-paragraph"><li><div class="btn-group"><a class="btn btn-sm btn-default" data-edit="outdent" title="" data-original-title="Reduce indent (Shift+Tab)"><span class="glyphicon glyphicon-indent-left"></span></a><a class="btn btn-sm btn-default" data-edit="indent" title="" data-original-title="Indent (Tab)"><span class="glyphicon glyphicon-indent-right"></span></a></div><div class="btn-group"><a class="btn btn-sm btn-default btn-primary" data-edit="justifyleft" title="" data-original-title="Align Left (Ctrl/Cmd+L)"><span class="glyphicon glyphicon-align-left"></span></a><a class="btn btn-sm btn-default" data-edit="justifycenter" title="" data-original-title="Center (Ctrl/Cmd+E)"><span class="glyphicon glyphicon-align-center"></span></a><a class="btn btn-sm btn-default" data-edit="justifyright" title="" data-original-title="Align Right (Ctrl/Cmd+R)"><span class="glyphicon glyphicon-align-right"></span></a><a class="btn btn-sm btn-default" data-edit="justifyfull" title="" data-original-title="Justify (Ctrl/Cmd+J)"><span class="glyphicon glyphicon-align-justify"></span></a></div></li></ul></div>')}else{if(z==="links"){$(".btn-toolbar",w).append('<div class="btn-group"><a class="btn btn-sm btn-default link-to-add-ui-btn dropdown-toggle" data-toggle="dropdown" title="" data-original-title="Hyperlink"><span class="glyphicon glyphicon-link"></span></a><div class="dropdown-menu input-append add-url"><div class="input-group"><input type="text" placeholder="URL" class="link-to-add form-control"><div class="input-group-btn"><button type="button" class="btn btn-default link-to-add-btn" aria-expanded="false">Add</button></div></div></div><a class="btn btn-sm btn-default" data-edit="unlink" title="" data-original-title="Remove Hyperlink"><span class="fa fa-chain-broken"></span></a></div>')}else{if(z==="table"){$(".btn-toolbar",w).append('<div class="btn-group"><button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="" tabindex="-1" data-original-title="Table"><i class="fa fa-table icon-table"></i> <span class="caret"></span></button><div class="dropdown-menu input-append note-table"><div class="note-dimension-picker"><div class="note-dimension-picker-mousecatcher" data-event="insertTable" data-value="1x1"></div><div class="note-dimension-picker-highlighted"></div><div class="note-dimension-picker-unhighlighted"></div></div><div class="note-dimension-display"> 1 x 1 </div></div></div>')}else{if(z==="colors"){$(".btn-toolbar",w).append('<div class="note-color btn-group"><button type="button" class="btn btn-default btn-sm btn-small note-recent-color" title="" data-event="color" data-value="{&quot;backColor&quot;:&quot;yellow&quot;}" tabindex="-1" data-original-title="Recent Color"><i class="fa fa-font icon-font" style="color:black;background-color:yellow;"></i></button><button type="button" class="btn btn-default btn-sm btn-small dropdown-toggle" data-toggle="dropdown" title="" tabindex="-1" data-original-title="More Color"><span class="caret"></span></button><ul class="dropdown-menu"><li><div class="btn-group"><div class="note-palette-title">Background Color</div><a class="note-color-reset" href="#" data-event="backColor" data-value="inherit" title="Transparent">Set transparent</a><div class="note-color-palette" data-target-event="backColor">'+c("backColor")+'</div></div><div class="btn-group"><div class="note-palette-title">Foreground Color</div><a href="#" class="note-color-reset" data-event="foreColor" data-value="inherit" title="Reset">Reset to default</a><div class="note-color-palette" data-target-event="foreColor">'+c("foreColor")+"</div></div></li></ul></div>")}else{if(z==="image"){$(".btn-toolbar",w).append('<div class="btn-group"><a class="pictureBtn btn btn-sm btn-default" title="" data-original-title="Insert picture (or just drag &amp; drop)"><span class="glyphicon glyphicon-picture"></span></a><input type="file" name="pictureTlb" style="position:absolute; top: -1000px;" multiple></div>')}else{if(z==="undo"){$(".btn-toolbar",w).append('<div class="btn-group"><a class="btn btn-sm btn-default" data-edit="undo" title="" data-original-title="Undo (Ctrl/Cmd+Z)"><span class="fa fa-undo"></span></a><a class="btn btn-sm btn-default" data-edit="redo" title="" data-original-title="Redo (Ctrl/Cmd+Y)"><span class="fa fa-repeat"></span></a></div>')}else{if(z==="fullscreen"&&h){$(".btn-toolbar",w).append('<div class="btn-group"><a href="#" title="" data-original-title="Enter Zen Mode" class="btn btn-sm btn-default fullscreen-button"><span class="fa fa-arrows-alt"></span></a></div>');$(".fullscreen-button",w).on("click",Bennu.htmlEditor.fullscreen)}else{if(z==="source"){$(".btn-toolbar",w).append('<div class="btn-group"><a class="btn btn-sm btn-default switch-to-code" title="" data-original-title="Switch to Source"><span class="fa fa-code"></span></a></div>');$(".bennu-html-editor-editor",w).after("<div class='bennu-html-code-editor-container' style='display:none;'><pre class='bennu-html-code-editor'></pre></div>")}}}}}}}}}}}}$("a[title]",w).tooltip({container:"body"});$("[data-role=magic-overlay]",w).each(function(){var s=$(this),C=$(s.data("target"));s.css("opacity",0).css("position","absolute").offset(C.offset()).width(C.outerWidth()).height(C.outerHeight())});$(".dropdown-menu input",w).click(function(){return false}).change(function(){$(this).parent(".dropdown-menu").siblings(".dropdown-toggle").dropdown("toggle")}).keydown("esc",function(){this.value="";$(this).change()});w.data("related",x);x.data("input",w);function l(C,s){var D="";if(C==="unsupported-file-type"){D="Unsupported format "+s}else{console.log("error uploading file",C,s)}$('<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button><strong>File upload error</strong> '+D+" </div>").prependTo("#alerts")}var p=new Sanitize(Sanitize.Config.RELAXED);$(".bennu-html-editor-editor",w).on("paste",function(){setTimeout(function(){$(".bennu-html-editor-editor",w).html(p.clean_node($(".bennu-html-editor-editor",w)[0]))})});$(".bennu-html-editor-editor",w).on("focus",function(){var s=$(this);s.data("before",s.html());return s}).on("blur keyup paste input",function(){var s=$(this);if(s.data("before")!==s.html()){s.data("before",s.html());s.trigger("change")}return s});var t={};t.val=function(){if(arguments.length===0){return $(".bennu-html-editor-editor",w).html()}else{return $(".bennu-html-editor-editor",w).html(arguments[0])}};var r=x.attr("bennu-localized-string");if(r!=null&&r!=undefined){var j=$('<div class="btn-group bennu-localized-string-group"><button type="button" class="btn btn-default dropdown-toggle bennu-localized-string-button" data-toggle="dropdown"><span class="bennu-localized-string-language"></span> <span class="caret"></span></button><ul class="dropdown-menu bennu-localized-string-menu" role="menu"></ul></div>');$("div.btn-toolbar",w).before(j);w.data("localized-string",true);Bennu.localizedString.makeLocaleList($(".bennu-localized-string-menu",w),w,function(s){Bennu.localizedString.changeData($(s.target).parent().data("locale"),$(".bennu-localized-string-language",w),t,w)});Bennu.localizedString.changeData(Bennu.locale,$(".bennu-localized-string-language",w),t,w);if(x.val()===""){x.val("{}")}}$(".bennu-html-editor-editor",w).on("change",function(){var D=x.attr("bennu-localized-string");if(D!==null&&D!==undefined){var H=JSON.parse($(w.data("related")).val());var C=$(".bennu-localized-string-language",w).data("locale");var s=C.tag;if(!(s in H)){var F=C.tag.split("-")[0].toLowerCase();if(F in H){s=F}}H[s]=t.val();$(w.data("related")).val(JSON.stringify(H));$(".help-block",w).empty();w.removeClass("has-error");w.data("related").trigger("change")}else{var G=w.data("related").val();var E=$(".bennu-html-editor-editor",w).html();if(G!==E){w.data("related").val($(".bennu-html-editor-editor",w).html());w.data("related").trigger("change")}}});$(".btn-toolbar .pictureBtn",w).on("click",function(){$(".btn-toolbar input[name='pictureTlb']",w).click()});var B=function(C){$(".bennu-html-editor-editor",w).focus();for(var s=0;s<C.length;s++){var D=C[s];document.execCommand("insertimage",0,D)}};$(".btn-toolbar input[name='pictureTlb']",w).on("change",function(s){var C=x.data("fileHandler");C&&C($(".btn-toolbar input[name='pictureTlb']",w)[0].files,B)});w.on("dragenter dragover",false).on("drop",function(s){var C=s.originalEvent.dataTransfer;s.stopPropagation();s.preventDefault();if(C&&C.files&&C.files.length>0){var D=x.data("fileHandler");D&&D(C.files,B)}});$(".bennu-html-editor-editor",w).wysiwyg({dragAndDropImages:false,fileUploadError:l});Bennu.validation.attachToForm(w);x.after(w);var q=18;var u=function(C,K){var E=$(C.target.parentNode);var D=E.next();var J=E.find(".note-dimension-picker-mousecatcher");var F=E.find(".note-dimension-picker-highlighted");var G=E.find(".note-dimension-picker-unhighlighted");var I;if(C.offsetX===undefined){var s=$(C.target).offset();I={x:C.pageX-s.left,y:C.pageY-s.top}}else{I={x:C.offsetX,y:C.offsetY}}var H={c:Math.ceil(I.x/q)||1,r:Math.ceil(I.y/q)||1};F.css({width:H.c+"em",height:H.r+"em"});J.attr("data-value",H.c+"x"+H.r);if(3<H.c&&H.c<10){G.css({width:H.c+1+"em"})}if(3<H.r&&H.r<10){G.css({height:H.r+1+"em"})}D.html(H.c+" x "+H.r)};var m=function(G,D){var F=[],C;for(var E=0;E<G;E++){F.push("<td>&nbsp;</td>")}C=F.join("");var s=[],H;for(var I=0;I<D;I++){s.push("<tr>"+C+"</tr>")}H=s.join("");return'<table class="table table-bordered">'+H+"</table>"};var n=$(".btn-toolbar",w).find(".note-dimension-picker-mousecatcher");n.css({width:10+"em",height:10+"em"}).on("mousemove",function(s){u(s,{})});$(".note-dimension-picker-mousecatcher",w).on("click",function(){var s=$(this).attr("data-value").split("x");$(".bennu-html-editor-editor",w).focus();document.execCommand("insertHTML",false,m(parseInt(s[0]),parseInt(s[1])))});$(".link-to-add-ui-btn",w).on("click",function(){var s=Bennu.htmlEditor.saveSelection();$(".bennu-html-editor-editor",w).data("save-selection",s);setTimeout(function(){$(".link-to-add",w).focus()},100)});$(".link-to-add-btn",w).on("click",function(){var s=$(".bennu-html-editor-editor",w).data("save-selection");$(".bennu-html-editor-editor",w).focus();setTimeout(function(){if(s){Bennu.htmlEditor.restoreSelection(s)}document.execCommand("CreateLink",false,$(".link-to-add").val());$(".link-to-add").val("")})});x.on("change.bennu",function(F){var E=x.attr("bennu-localized-string");if(E!==null&&E!==undefined){var H=$(x).val();if(H===null||H===undefined||H===""){H="{}";$(x).val(H)}var C=JSON.parse(H);var G=$(".bennu-localized-string-language",w).data("locale");var J=G.tag;if(!(J in C)){var D=G.tag.split("-")[0].toLowerCase();if(D in C){J=D}}var I=C[J]||"";var s=$(".bennu-html-editor-editor",w).html();if(s!==I){$(".bennu-html-editor-editor",w)[0].innerHTML=I}}else{var I=$(x).val();var s=$(".bennu-html-editor-editor",w).html();if(s!==I){$(".bennu-html-editor-editor",w)[0].innerHTML=I}}x.data("handler").trigger()});var k=Bennu.widgetHandler.makeFor(x);var o=function(D,s){var C=$(".bennu-html-code-editor",D).data("editor");if(C){return C}Bennu.codeEditor.require();C=ace.edit($(".bennu-html-code-editor",D)[0]);C.setFontSize(13);C.setTheme("ace/theme/clouds");C.getSession().setMode("ace/mode/html");C.setHighlightActiveLine(false);C.setShowPrintMargin(false);C.getSession().setUseWrapMode(true);$(".bennu-html-code-editor",D).data("editor",C);C.on("input",function(){if(s!==null&&s!==undefined){var H=JSON.parse(k.get());var F=$(".bennu-localized-string-language",D).data("locale");var E=F.tag;if(!(E in H)){var G=F.tag.split("-")[0].toLowerCase();if(G in H){E=G}}H[E]=C.getValue();k.set(JSON.stringify(H))}else{k.set(C.getValue())}});return C};if($(".bennu-html-code-editor",w).length!=0){w.data("showSrc",false);var r=x.attr("bennu-localized-string");$(".switch-to-code",w).on("click",function(){var F=o(w,r);if(!w.data("showSrc")){$(".bennu-html-editor-toolbar .btn",w).map(function(){(!$(this).hasClass("switch-to-code"))&&$(this).attr("disabled","")});$(".switch-to-code",w).addClass("active btn-primary");$(".bennu-html-editor-editor",w).hide();$(".bennu-html-code-editor-container",w).show();$(".bennu-localized-string-button",w).attr("disabled","");if(r!==null&&r!==undefined){var G=JSON.parse(k.get());var C=$(".bennu-localized-string-language",w).data("locale");var s=C.tag;if(!(s in G)){var E=C.tag.split("-")[0].toLowerCase();if(E in G){s=E}}var D=G[s];F.setValue(D)}else{F.setValue()}w.data("showSrc",true)}else{$(".bennu-html-editor-toolbar .btn",w).map(function(){$(this).removeAttr("disabled")});$(".switch-to-code",w).removeClass("active btn-primary");$(".bennu-localized-string-button",w).removeAttr("disabled");$(".bennu-html-editor-editor",w).show();$(".bennu-html-code-editor-container",w).hide();if(r!==null&&r!==undefined){var G=JSON.parse(k.get());var C=$(".bennu-localized-string-language",w).data("locale");var s=C.tag;if(!(s in G)){var E=C.tag.split("-")[0].toLowerCase();if(E in G){s=E}}G[s]=F.getValue();k.set(JSON.stringify(G))}else{k.set(F.getValue())}w.data("showSrc",false)}})}var y=function(s){if(s.backColor==="inherit"&&s.foreColor==="inherit"){document.execCommand("removeFormat",false)}else{document.execCommand("backColor",false,s.backColor);if(s.foreColor==="inherit"){document.execCommand("foreColor",false,"#444")}else{document.execCommand("foreColor",false,s.foreColor)}}};if($(".note-color",w).length!=0){$("[data-event='backColor']").map(function(){$(this).on("click",function(D){var E=$(D.target);var s=E.data("value");var C=$(".note-recent-color",w).data("value");C.backColor=s;$(".note-recent-color i",w).css("background-color",s);$(".note-recent-color",w).data("value",C);y(C)})});$("[data-event='foreColor']").map(function(){$(this).on("click",function(D){var E=$(D.target);$(".bennu-html-editor-editor",w).focus();var s=E.data("value");var C=$(".note-recent-color",w).data("value");C.foreColor=s;$(".note-recent-color i",w).css("color",s);$(".note-recent-color",w).data("value",C);y(C)})});$(".note-recent-color",w).on("click",function(){y($(".note-recent-color",w).data("value"))})}return k}})();(function(){Bennu.group=Bennu.group||{};Bennu.group.attr="bennu-group";Bennu.group.selectionClass="btn-info";Bennu.group.template='<div class="btn-group bennu-group-widget"></div>';Bennu.group.allow={};Bennu.group.allow["public"]={name:"Public",group:"anyone",icon:"glyphicon glyphicon-globe"};Bennu.group.allow.users={name:"Users",group:"logged",icon:"glyphicon glyphicon-user"};Bennu.group.allow.managers={name:"Managers",group:"#managers",icon:"glyphicon glyphicon-eye-open"};Bennu.group.allow.custom={name:"Custom",group:"custom",icon:"glyphicon glyphicon-wrench"};Bennu.group.modalTemplate='<div class="bennu-group-custom-modal modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><h4 class="modal-title">Custom Group</h4></div><p><div class="modal-body"><p><small><b>Add User:</b></small></p><div class="row"><div class="col-sm-12"><input placeholder="Username" class="user-search form-control"/></div></div></p><p><small><b>Group users:</b></small></p><div class="bennu-group-list" style="height:149px; overflow:scroll; border:1px solid #ddd; margin-top:20px;"><table class="table table-striped"></table></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button></div></div><!-- /.modal-content --></div><!-- /.modal-dialog --></div><!-- /.modal -->';Bennu.group.modalClearUsers=function(){$(".bennu-group-list table",Bennu.group.customModal).empty()};Bennu.group.modalAddUserToModal=function(h){var g=$('<tr class="bennu-group-custom-user" data-username="'+h.username+'"><td class="col-xs-1"><img class="img-circle" src="'+h.avatar+'?s=32" alt="" /></td><td class="col-xs-9"><div><b>'+h.displayName+"</b></div><div><small>"+h.username+'</small></div></td><td class="col-xs-2"><button class="btn btn-sm btn-warning">Remove</button></td></tr>');$("button",g).on("click",function(l){l=$(l.target).closest(".bennu-group-custom-user");var n=l.data("username");l.remove();var m=Bennu.group.customModal.data("input");var k=d(m);for(var j=k.length-1;j>=0;j--){if(k[j]===n){k.splice(j,1)}}a(k,m)});$(".bennu-group-list table",Bennu.group.customModal).append(g)};function c(j){var g=j.data("related");var h=g.val();$("."+Bennu.group.selectionClass,j).removeClass(Bennu.group.selectionClass);if($("[data-role='"+h+"']",j).length){$("[data-role='"+h+"']",j).addClass(Bennu.group.selectionClass)}else{if(h.substring(0,2)==="U("){$("[data-role='custom']",j).addClass(Bennu.group.selectionClass)}else{$("button",j).addClass("disabled");j.attr("data-trigger","hover").attr("data-placement","right").data("title","Disabled, group is too complex.").tooltip({})}}}Bennu.group.setupModal=function(){$(document.body).append(Bennu.group.modalTemplate);var h=function(j){return function k(m,l){l(states)}};var g=new Bloodhound({datumTokenizer:function(j){return Bloodhound.tokenizers.whitespace(j.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:Bennu.contextPath+"/api/bennu-core/users/find",replace:function(j,k){return j+"?query="+k+"&maxHits=10"},ajax:{beforeSend:function(k,j){},type:"POST"},filter:function(j){return j.users}}});g.initialize();$(".bennu-group-custom-modal .user-search").typeahead({hint:true,highlight:true,minLength:1,},{name:"custom-group-username",displayKey:"value",source:g.ttAdapter(),templates:{empty:['<div class="empty-message">',"No User Found","</div>"].join("\n"),suggestion:function(j){Bennu.group.userCache[j.username]=j;return'<p><div class="row"><div class="col-xs-1"><img class="img-circle" src="'+j.avatar+'?s=32" alt="" /></div><div class="col-sm-11"><div>'+j.displayName+"</div><div>"+j.username+"</div></div></div></p>"}}}).on("typeahead:autocompleted typeahead:selected",function(j,n,m){Bennu.group.modalAddUserToModal(n);var l=Bennu.group.customModal.data("input");var k=d(l);k.push(n.username);a(k,l)})};function d(h){var g=h.data("customCache");g=g.substring(2,g.length-1).split(",");g=$.map(g,function(j){return j.trim()});if(g.length==1&&g[0]===""){g=[]}return g}function a(k,l){var g="";for(var h=0;h<k.length;h++){g+=k[h];if(h<k.length-1){g+=", "}}var j="U("+g+")";l.data("customCache",j);l.data("related").val(j)}function b(k){Bennu.group.customModal=$(".bennu-group-custom-modal");Bennu.group.customModal.data("input",k);var j=d(k);$(".bennu-group-list table").empty();for(var h=0;h<j.length;h++){var g=Bennu.group.userCache[j[h]];Bennu.group.modalAddUserToModal(g)}Bennu.group.customModal.modal("show")}function f(h){var g=h.data("related");if(g.val()===""){g.val("U()")}if(g.val()=="nobody"){g.val("U()")}if(g.val().substring(0,2)=="U("){h.data("customCache",g.val())}else{h.data("customCache","U()")}$.map(d(h),e)}Bennu.group.userCache={};function e(g){$.post(Bennu.contextPath+"/api/bennu-core/users/find?query="+g+"&maxHits=10",{},function(h){Bennu.group.userCache[g]=h.users[0]})}Bennu.group.createWidget=function(h){h=$(h);var m=$(Bennu.group.template);var l=h.attr("allow")||"public,users,custom";l=l.split(",");for(var j=0;j<l.length;j++){var k=Bennu.group.allow[l[j]];if(k){var g='<button type="button" data-role="'+k.group+'" class="btn btn-sm btn-default"><span class="'+k.icon+'"></span> '+k.name+"</button>";m.append(g)}else{console.warn("Unknown permission type "+l[j])}}m.data("related",h);h.data("input",m);$("button",m).click(function(n){n=$(n.target).closest("button");var o=n.closest(".bennu-group-widget");if(n.data("role")!="custom"){o.data("related").val(n.data("role"))}else{o.data("related").val(o.data("customCache")||"U()");b(o)}c(o);o.data("related").trigger("change")});h.after(m);f(m);c(m);h.on("change.bennu",function(n){f(m);c(m);h.data("handler").trigger()});return Bennu.widgetHandler.makeFor(h)}})();(function(){Bennu.userAutocomplete=Bennu.userAutocomplete||{};Bennu.userAutocomplete.attr="bennu-user-autocomplete";Bennu.userAutocomplete.setup=function(){var a=null;a=new Bloodhound({datumTokenizer:function(b){return Bloodhound.tokenizers.whitespace(b.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,remote:{url:Bennu.contextPath+"/api/bennu-core/users/find",replace:function(b,c){return b+"?query="+c+"&maxHits=10"},ajax:{beforeSend:function(c,b){},type:"POST"},filter:function(b){return b.users}}});a.initialize();return a};Bennu.userAutocomplete.bloodhound=Bennu.userAutocomplete.bloodhound||Bennu.userAutocomplete.setup();Bennu.userAutocomplete.createWidget=function(b){var b=$(b);var e=$("<input type='text'/>");var c=b.prop("attributes");$.each(c,function(){if(this.name===Bennu.userAutocomplete.attr||this.name==="name"||this.name==="id"||this.name==="value"){return true}e.attr(this.name,this.value)});b.attr("type","hidden");var g="user-autocomplete-"+Bennu.gensym();e.attr("id",g);e.insertAfter(b);var d=[];var a={input:b,value:undefined,get:function(){return this.value},set:function(h){this.value=h;this.trigger("change")},clear:function(h){this.set("")},onchange:function(h){d.push(h)},trigger:function(){var h=this;for(var j=0;j<d.length;j++){d[j].apply(h,{type:"change",target:this})}},};a.onchange(function(){var h=this.get();if(h&&h.hasOwnProperty("username")&&h.hasOwnProperty("name")){$(b).val(h.username);e.typeahead("val",h.name)}else{$(b).val("");e.typeahead("val","")}});$("#"+g).typeahead({hint:true,highlight:true,minLength:3,},{name:"username",displayKey:function(h){return h.displayName},source:Bennu.userAutocomplete.bloodhound.ttAdapter(),templates:{empty:['<div class="empty-message">',"No User Found","</div>"].join("\n"),suggestion:function(h){return'<p><div class="row"><div class="col-xs-1"><img class="img-circle" src="'+h.avatar+'?s=32" alt="" /></div><div class="col-sm-11"><div>'+h.displayName+"</div><div>"+h.username+"</div></div></div></p>"}}}).on("typeahead:autocompleted typeahead:selected",function(j,h,k){a.set(h)});a.handler=Bennu.widgetHandler.makeFor(b);var f=$(b).val();if(f){$.ajax({url:Bennu.contextPath+"/api/bennu-core/users/find?query="+f+"&maxHits=1",dataType:"json",method:"POST",success:function(h){a.set(h.users[0])}})}return a}})();(function(){function a(g){g=g.trim();if(g===""){var h=[0,0,0]}else{if(g.indexOf(".")>0){var f=g.split(".");g=f[0];var d=parseInt(f[1]);console.log(g)}else{var d=0}var h=g.split(":");h[0]=parseInt(h[0]);h[1]=(h[1]&&parseInt(h[1]))||0;h[2]=(h[2]&&parseInt(h[2]))||0}var e=new Date();e.setHours(h[0]);e.setMinutes(h[1]);e.setSeconds(h[2]);e.setMilliseconds(d);return e}Bennu.datetime=Bennu.datetime||{};Bennu.datetime.createWidget=function(g){var g=$(g);var h=(g.attr("bennu-datetime")==="");var d=(g.attr("bennu-date")==="");var f=(g.attr("bennu-time")==="");if(h||(d&&f)){return Bennu.datetime.createDateTimeWidget(g)}if(d){return Bennu.datetime.createDateWidget(g)}if(f){return Bennu.datetime.createTimeWidget(g)}};function c(j,f){if(j.attr("min-date")!==undefined){f.minDate=new Date(j.attr("min-date"))}if(j.attr("max-date")===""){f.maxDate=new Date(j.attr("max-date"))}if(j.attr("unavaible-dates")!==undefined){var h=j.attr("unavaible-dates").split(",");var d=[];for(var g=0;g<h.length;g++){d.add(new Date(h[g]))}f.disabledDates=d}if(j.attr("avaible-dates")!==undefined){var h=j.attr("avaible-dates").split(",");var d=[];for(var g=0;g<h.length;g++){d.add(new Date(h[g]))}f.enabledDates=d}return}Bennu.datetime.createDateWidget=function(h){h=$(h);var g=$('<div class="bennu-datetime-input-group input-group date"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span><input data-date-format="DD/MM/YYYY" type="text" class="bennu-datetime-input form-control"/></div>');var d=h.val();if(d&&d.trim()!==""){d=new Date(d);h.val(moment(d).format("YYYY-MM-DD"))}var f={language:Bennu.lang,showToday:true,pickDate:true,pickTime:false,};if(d){f.defaultDate=d}c(h,f);$("input",g).on("change",function(e){e=$(e.target);var j=moment(e.val(),"DD/MM/YYYY").format("YYYY-MM-DD");if(j!==h.val()){h.val(j);h.trigger("change")}}).datetimepicker(f);h.after(g);h.on("change.bennu",function(k){var l=$(h).val();if(l.trim()==""){l=new Date()}else{l=new Date(l)}h.val(moment(l).format("YYYY-MM-DD"));var j=$(".bennu-datetime-input",g).data("DateTimePicker").setDate(moment(l).format("DD/MM/YYYY"));var e=moment(l).format("DD/MM/YYYY");if(j!==e){$(".bennu-datetime-input",g).data("DateTimePicker").setDate(e)}h.data("handler").trigger()});return Bennu.widgetHandler.makeFor(h)};function b(f,d){if(f.attr("only-hours")!==undefined){d.useSeconds=false;d.useMinutes=false}if(f.attr("no-seconds")!==undefined){d.useSeconds=false;d.useMinutes=true}if(f.attr("minute-stepping")!==undefined){d.minuteStepping=parseInt(f.attr("minute-stepping"))}}Bennu.datetime.createTimeWidget=function(h){h=$(h);var g=$('<div class="bennu-datetime-input-group input-group date"><span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span><input type="text" data-date-format="HH:mm:ss" class="bennu-datetime-input form-control"/></div>');var d=h.val();if(d&&d.trim()!=""){d=a(d);h.val(moment(d).format("HH:mm:ss.SSS"))}var f={language:Bennu.lang,pickDate:false,pickTime:true,useSeconds:true};if(d){f.defaultDate=d}b(h,f);$("input",g).on("change",function(e){e=$(e.target);var k=e.val();if(k.trim()==""){var j=""}else{var j=moment(a(k)).format("HH:mm:ss.SSS")}if(j!==h.val()){h.val(j);h.trigger("change")}}).datetimepicker(f);h.after(g);h.on("change.bennu",function(k){var l=$(h).val();if(l.trim()==""){l=new Date()}else{l=a(l)}h.val(moment(l).format("HH:mm:ss.SSS"));var j=$(".bennu-datetime-input",g).data("DateTimePicker").setDate(moment(l).format("HH:mm:ss"));var e=moment(l).format("HH:mm:ss");if(j!==e){$(".bennu-datetime-input",g).data("DateTimePicker").setDate(e)}h.data("handler").trigger()});return Bennu.widgetHandler.makeFor(h)};Bennu.datetime.createDateTimeWidget=function(h){h=$(h);var g=$('<div class="bennu-datetime-input-group input-group date"><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span><input data-date-format="DD/MM/YYYY HH:mm:ss" type="text" class="bennu-datetime-input form-control"/></div>');var d=h.val();if(d&&d.trim()!=""){d=new Date(d);h.val(moment(d).format("YYYY-MM-DDTHH:mm:ss.SSSZ"))}var f={sideBySide:true,language:Bennu.lang,pickDate:true,pickTime:true,useSeconds:true,showToday:true,};if(d){f.defaultDate=d}c(h,f);b(h,f);$("input",g).on("change",function(e){e=$(e.target);var k=e.val().trim();if(k==""){h.val("")}else{var j=moment(k,"DD/MM/YYYY HH:mm:ss").format("YYYY-MM-DDTHH:mm:ss.SSSZ");if(j!==h.val()){h.val(j);h.trigger("change")}}}).datetimepicker(f);h.after(g);h.data("input");g.data("related",h);h.on("change.bennu",function(k){var l=$(h).val();if(l.trim()==""){l=new Date()}else{l=new Date(l)}h.val(moment(l).format("YYYY-MM-DDTHH:mm:ss.SSSZ"));var j=$(".bennu-datetime-input",g).data("DateTimePicker").getDate().format("DD/MM/YYYY HH:mm:ss");var e=moment(l).format("DD/MM/YYYY HH:mm:ss");if(j!==e){$(".bennu-datetime-input",g).data("DateTimePicker").setDate(e)}h.data("handler").trigger()});return Bennu.widgetHandler.makeFor(h)}}());(function(){Bennu.codeEditor=Bennu.codeEditor||{};Bennu.codeEditor.require=function(){if(!window.ace){$.ajaxSetup({cache:true});$(document.body).append("<script src='"+Bennu.contextPath+"/bennu-toolkit/js/ace/ace.js'><\/script>")}}})();(function(){var a=angular.module("bennuToolkit",[]);a.filter("i18n",function(){return function(b){return Bennu.localizedString.getContent(b,Bennu.locale)}});a.directive("ngLocalizedString",["$timeout",function(b){return{restrict:"A",scope:{model:"=ngLocalizedString"},link:function(f,e,c){e.hide();var d=Bennu.localizedString.createWidget(e);f.$watch("model",function(g){g=JSON.stringify(g);if(g!==d.get()){d.set(g)}});d.onchange(function(){b(function(){f.model=JSON.parse(d.get())})})}}}]);a.directive("ngHtmlEditor",["$timeout",function(b){return{restrict:"A",scope:{model:"=ngHtmlEditor",onImageAdded:"=ngOnImageAdded"},link:function(f,e,c){e.hide();var g=e[0].hasAttribute("bennu-localized-string");var d=Bennu.htmlEditor.createWidget(e);f.$watch("model",function(h){if(g){h=JSON.stringify(h)}if(h!==d.get()){d.set(h)}});d.onchange(function(){b(function(){f.model=g?JSON.parse(d.get()):d.get()})});e.data("fileHandler",function(h,j){if(f.onImageAdded){f.onImageAdded(h,j,d)}})}}}]);a.directive("progressBar",function(){return{restrict:"E",scope:{current:"=",total:"="},template:'<p><strong>{{header}}</strong> {{current / divider | number:precision}}{{unit}} / {{total / divider | number:precision}}{{unit}}</p>	              <div class="progress progress-striped" title="{{ratio() | number}}%">	                <div class="progress-bar progress-bar-{{barStyle()}}" role="progressbar" style="width: {{ratio() | number:0}}%;"	                     aria-valuemin="0" aria-valuemax="100" aria-valuenow="{{ratio() | number:0}}">	                  {{ratio() | number:0}}%	                </div>	              </div>',link:function(d,c,b){d.ratio=function(){return(d.current/d.total)*100};d.barStyle=function(){var e=Math.round(d.ratio());if(e<75){return"success"}if(e<90){return"warning"}return"danger"};d.divider=b.divider||1;d.unit=b.unit||"";d.precision=b.precision||0;d.header=b.header||""}}});a.directive("ngUserAutocomplete",["$timeout",function(b){return{restrict:"A",scope:{model:"=ngUserAutocomplete"},link:function(f,e,d){var c=Bennu.userAutocomplete.createWidget(e);f.$watch("model",function(g){c.set(g)});c.onchange(function(){b(function(){f.model=c.get()})})}}}])})();